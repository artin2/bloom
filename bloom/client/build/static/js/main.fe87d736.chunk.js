(this.webpackJsonpbloom=this.webpackJsonpbloom||[]).push([[0],{102:function(e,t,a){},112:function(e,t,a){e.exports=a.p+"static/media/abstract-painting.8e0472b0.jpg"},135:function(e,t){t.queryString=function(e){var t=Object.entries(e).filter((function(e){return void 0!==e[1]})).map((function(e){return e.filter((function(e){return null!==e})).map(encodeURIComponent).join("=")})).join("&");return t&&"?"+t},t.getCategories=function(){return[{name:"Nail Salon"},{name:"Hair Salon"},{name:"Facials"},{name:"Barbershops"},{name:"Spa & Wellness"},{name:"Makeup"}]},t.shorterVersion=function(e){return"Spa & Wellness"==e?"Spa":"Barbershops"==e?"Barber":"Nail Salon"==e?"Nails":"Hair Salon"==e?"Hair":e},t.longerVersion=function(e){return"Spa"==e?"Spa & Wellness":"Barber"==e?"Barbershops":"Nails"==e?"Nail Salon":"Hair"==e?"Hair Salon":e},t.getCategoriesAsPairs=function(){return[{value:"Nails",label:"Nail Salon"},{value:"Hair",label:"Hair Salon"},{value:"Facials",label:"Facials"},{value:"Barbershops",label:"Barbershops"},{value:"Spa",label:"Spa & Wellness"},{value:"Makeup",label:"Makeup"}]}},224:function(e,t,a){},254:function(e,t,a){},260:function(e,t,a){},265:function(e,t){},276:function(e,t,a){e.exports=a.p+"static/media/barber.d2f9dfa8.jpg"},277:function(e,t,a){e.exports=a.p+"static/media/facials.ed0b2cb9.jpg"},278:function(e,t,a){e.exports=a.p+"static/media/hair.d4215e0f.jpg"},279:function(e,t,a){e.exports=a.p+"static/media/lipstics2.6d47408d.jpg"},280:function(e,t,a){e.exports=a.p+"static/media/massage3.55e106f9.jpg"},281:function(e,t,a){e.exports=a.p+"static/media/nails3.81962b22.jpg"},282:function(e,t,a){e.exports=a.p+"static/media/salon.140a41f2.jpg"},306:function(e,t,a){e.exports=a(411)},310:function(e,t,a){},315:function(e,t,a){},316:function(e,t,a){},319:function(e,t,a){},320:function(e,t,a){e.exports=a.p+"static/media/paint_line.bb971069.png"},322:function(e,t,a){},323:function(e,t,a){},324:function(e,t,a){},337:function(e,t,a){},338:function(e,t,a){},340:function(e,t,a){},401:function(e,t,a){},404:function(e,t,a){},405:function(e,t,a){e.exports=a.p+"static/media/salon2.5edf0e42.jpeg"},406:function(e,t,a){e.exports=a.p+"static/media/hair_salon.5e677ff9.jpg"},407:function(e,t,a){},408:function(e,t,a){},409:function(e,t,a){},410:function(e,t,a){},411:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(34),o=a.n(s),l=(a(310),a(52)),i=a(73),c=a(20),u=a(18),m=a(21),p=a(22),d=a(7),h=a(23),v=(a(224),a(37)),E=a(27),g=a(11),f=a(112),y=a.n(f),b=a(12),k=a(8),M=a(43),C=a(16),w=a(33),S=a(262),H=a.n(S),_=a(263),T=a.n(_),j=a(236),x=a(64),O=a(62);var N=a(265);function I(e){return{type:"ADD_ALERT",message:e}}var D="http://bloom-490-dev.us-east-1.elasticbeanstalk.com";var W=function(e){console.log("Google Success: ",e.accessToken)},R=function(e){console.log("Google Failure:",e.error)},P=function(e){console.log("Facebook Success:",e.accessToken)},G=function(e){e.status&&console.log("Facebook Failure")},B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={email:"",password:"",message:{}},a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(b.a)({},e.target.id,e.target.value))}},{key:"componentDidUpdate",value:function(e,t){e.user!==this.props.user&&(this.props.appointments?this.props.history.push({pathname:"/book/"+this.props.store_id,appointments:this.props.appointments,currentStep:3}):this.props.history.push({pathname:"/"}))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.loginUser(this.state.email,this.state.password,"")}},{key:"render",value:function(){var e=this;return r.a.createElement(k.a,{className:"formBody rounded"},r.a.createElement("h3",null,this.props.title),r.a.createElement(k.a.Group,{style:{marginTop:40,width:"65%",marginLeft:"17%"}},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.d,null))),r.a.createElement(k.a.Control,{id:"email",type:"email",placeholder:"Email",onChange:this.handleChange}))),r.a.createElement(k.a.Group,{style:{width:"65%",marginLeft:"17%"}},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.g,null))),r.a.createElement(k.a.Control,{id:"password",type:"password",placeholder:"Password",onChange:this.handleChange}))),r.a.createElement(g.a,{xs:8,sm:8,md:8,lg:8,style:{marginLeft:"17%"}},r.a.createElement(M.a,{className:"login",type:"submit",variant:"primary",onClick:this.handleSubmit},"Login"),r.a.createElement("p",null,r.a.createElement("b",null," OR ")),r.a.createElement(H.a,{clientId:"127645252410-8tui8lsltfpdnumb5s1ha0ft6q6rl8m1.apps.googleusercontent.com",buttonText:"Login with Google",onSuccess:W,onFailure:R,cookiePolicy:"single_host_origin",render:function(e){return r.a.createElement("button",{onClick:e.onClick,style:{width:"100%",backgroundColor:"#db4a39",color:"white",paddingRight:"30px",marginBottom:"10px",height:"48px",fontSize:"14px"}}," ",r.a.createElement(j.b,{size:45,style:{paddingRight:"15px"}}),"Login with Google")}}),r.a.createElement(T.a,{appId:"877662889336104",fields:"name,email,picture",onFailure:G,xfbml:!0,cssClass:"facebookButton",icon:r.a.createElement(j.a,{size:45,style:{paddingRight:"15px"}}),callback:P}),r.a.createElement("p",null," Don't have a Bloom account yet? ",r.a.createElement(M.a,{className:"toggle-button",onClick:function(){return e.props.toggleLogin(!1)}}," Sign Up. "))))}}]),t}(r.a.Component),L=Object(x.b)((function(e){return{user:e.userReducer.user}}),(function(e){return Object(O.b)({loginUser:function(e,t,a){return function(e,t,a){return function(a){fetch(D+"/login",{headers:{"Content-Type":"application/json"},credentials:"include",method:"POST",body:JSON.stringify({email:e,password:t})}).then((function(e){if(a(I(e)),200===e.status)return e.json();a({type:"USER_LOGIN_FAILURE",error:e})})).then((function(e){if(e)return a({type:"USER_LOGIN_SUCCESS",user:e.user}),e}))}}(e,t)}},e)}))(B),A=(a(102),a(57)),F=a(32),q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleSubmit=function(e){a.props.signUpUser(e)},a.phoneRegExp=/^(\+?\d{0,4})?\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{4}\)?)?$/,a.emailRegExp=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/,a.yupValidationSchema=F.c().shape({first_name:F.e().min(2,"First name must have at least 2 characters").max(100,"First name can't be longer than 100 characters").required("First name is required"),last_name:F.e().min(2,"Last name must have at least 2 characters").max(100,"Last name can't be longer than 100 characters").required("Last name is required"),email:F.e().email("Must be a valid email address").max(100,"Email must be less than 100 characters").required("Email is required"),phone:F.e().matches(a.phoneRegExp,"Phone number is not valid"),password:F.e().min(6,"Password must have at least 6 characters").max(100,"Password can't be longer than 100 characters").required("Password required"),password_confirmation:F.e().oneOf([F.d("password")],"Passwords do not match").required("Password Confirmation required")}),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.user!==this.props.user&&(this.props.appointments?this.props.history.push({pathname:"/book/"+this.props.store_id,appointments:this.props.appointments,currentStep:3}):this.props.history.push({pathname:"/"}))}},{key:"render",value:function(){var e=this;return r.a.createElement(A.a,{initialValues:{first_name:"",last_name:"",email:"",role:"0",phone:"",password:"",password_confirmation:""},validationSchema:this.yupValidationSchema,onSubmit:this.handleSubmit},(function(t){var a=t.values,n=t.errors,s=t.touched,o=t.handleChange,l=t.handleBlur,i=t.handleSubmit;return r.a.createElement(k.a,{className:"formBody rounded"},r.a.createElement("h3",{style:{marginBottom:40}},"Sign Up"),r.a.createElement(k.a.Group,{controlId:"formFirstName",className:"form"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.m,null))),r.a.createElement(k.a.Control,{type:"text",name:"first_name",value:a.first_name,placeholder:"First Name",onChange:o,onBlur:l,className:s.first_name&&n.first_name?"error":null})),s.first_name&&n.first_name?r.a.createElement("div",{className:"error-message"},n.first_name):null),r.a.createElement(k.a.Group,{controlId:"formLastName",className:"form"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.m,null))),r.a.createElement(k.a.Control,{type:"text",value:a.last_name,placeholder:"Last Name",name:"last_name",onChange:o,onBlur:l,className:s.last_name&&n.last_name?"error":null})),s.last_name&&n.last_name?r.a.createElement("div",{className:"error-message"},n.last_name):null),r.a.createElement(k.a.Group,{controlId:"formPhone",className:"form"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.k,null))),r.a.createElement(k.a.Control,{type:"text",value:a.phone,placeholder:"Phone Number",name:"phone",onChange:o,onBlur:l,className:s.phone&&n.phone?"error":null})),s.phone&&n.phone?r.a.createElement("div",{className:"error-message"},n.phone):null),r.a.createElement(k.a.Group,{controlId:"formEmail",className:"form"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.d,null))),r.a.createElement(k.a.Control,{type:"email",value:a.email,placeholder:"Email",name:"email",onChange:o,onBlur:l,className:s.email&&n.email?"error":null})),s.email&&n.email?r.a.createElement("div",{className:"error-message"},n.email):null),r.a.createElement(k.a.Group,{controlId:"formPassword",className:"form"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.h,null))),r.a.createElement(k.a.Control,{type:"password",value:a.password,placeholder:"Password",name:"password",onChange:o,onBlur:l,className:s.password&&n.password?"error":null})),s.password&&n.password?r.a.createElement("div",{className:"error-message"},n.password):null),r.a.createElement(k.a.Group,{controlId:"formPasswordConfirmation",className:"form"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.g,null))),r.a.createElement(k.a.Control,{type:"password",value:a.password_confirmation,placeholder:"Confirm Password",name:"password_confirmation",onChange:o,onBlur:l,className:s.password_confirmation&&n.password_confirmation?"error":null})),s.password_confirmation&&n.password_confirmation?r.a.createElement("div",{className:"error-message"},n.password_confirmation):null),r.a.createElement(M.a,{className:"signup",onClick:i},"Sign Up"),r.a.createElement("p",null," Already have a Bloom account? ",r.a.createElement(M.a,{className:"toggle-button",onClick:function(){return e.props.toggleLogin(!0)}}," Log in. ")))}))}}]),t}(r.a.Component),U=Object(x.b)((function(e){return{user:e.userReducer.user}}),(function(e){return Object(O.b)({signUpUser:function(e){return function(e){return function(t){fetch(D+"/signUp",{method:"POST",headers:{"Content-type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then((function(e){if(t(I(e)),200===e.status)return e.json();t({type:"USER_SIGNUP_FAILURE",error:e})})).then((function(e){if(e)return t({type:"USER_SIGNUP_SUCCESS",user:e.user}),e}))}}(e)}},e)}))(q),V=a(270),z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={email:"",password:"",message:{},displayLogin:"/login"==e.location.pathname},a.toggleLogin=a.toggleLogin.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.user!==this.props.user&&(this.props.appointments?this.props.history.push({pathname:"/book/"+this.props.store_id,appointments:this.props.appointments,currentStep:3}):this.props.history.push({pathname:"/"}))}},{key:"toggleLogin",value:function(e){this.setState({displayLogin:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{fluid:!0},r.a.createElement(V.a,{src:y.a,alt:"paint",style:{top:0,left:0,position:"absolute",width:"100%",filter:"grayscale(0.4)"}}),r.a.createElement(E.a,{className:"justify-content-center mt-5"},r.a.createElement(g.a,{xs:8,sm:7,md:6,lg:5},r.a.createElement((function(t){return e.state.displayLogin?r.a.createElement(L,{title:"Login",history:e.props.history,toggleLogin:e.toggleLogin}):r.a.createElement(U,{history:e.props.history,toggleLogin:e.toggleLogin})}),null))))}}]),t}(r.a.Component),J=a(169),Y=a(462),$=a(464),Z=(a(315),a(316),a(182)),K=a(78),X=a(135),Q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleSelectChange=function(e){a.setState({selectedCategory:e})},a.state={center:{lat:"",lng:""},categories:X.getCategoriesAsPairs(),selectedCategory:"",address:"",distance:15},a.autocomplete=null,a.handlePlaceSelect=a.handlePlaceSelect.bind(Object(d.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleSubmit",value:function(){var e,t=(0,a(135).queryString)({address:(e=this.state).address,distance:e.distance,nails:e.nails,hair:e.hair,spa:e.spa,facials:e.facials,barber:e.barber,makeup:e.makeup});console.log("query is: ",t),console.log("address is: ",this.state.address),this.props.history.push({pathname:"/search",search:t,state:{address:this.state.address}})}},{key:"handlePlaceSelect",value:function(){var e=this.autocomplete.getPlace(),t=e.address_components.map((function(e){return e.long_name})).join(", ");this.setState({address:t,center:{lat:e.geometry.location.lat(),lng:e.geometry.location.lng()}})}},{key:"componentDidMount",value:function(){var e=window.google;this.autocomplete=new e.maps.places.Autocomplete(document.getElementById("autocomplete"),{}),this.autocomplete.addListener("place_changed",this.handlePlaceSelect),this.props.location.state&&this.props.location.state.address&&(console.log("exists address",this.props.location.state.address),this.setState({address:this.props.location.state.address}))}},{key:"render",value:function(){return r.a.createElement(k.a,{inline:!0,className:"full-width"},r.a.createElement(k.a.Row,{className:"px-1 full-width"},r.a.createElement(g.a,{xs:12,md:6,className:"form-horizontal"},r.a.createElement(k.a.Group,{className:"full-width",controlId:"autocomplete"},r.a.createElement(C.a,{className:"not-auto"},r.a.createElement(k.a.Control,{className:"full-width",type:"text",placeholder:"Try 'New Haven, CT'",autoComplete:"new-password"}),r.a.createElement(C.a.Append,null,r.a.createElement(M.a,{variant:"secondary",onClick:this.handleSubmit,disabled:!this.state.address},r.a.createElement(Z.a,null)))))),r.a.createElement(g.a,{xs:12,md:3},r.a.createElement(k.a.Group,{className:"full-width"},r.a.createElement(K.a,{className:"full-width",value:this.state.selectedCategory,onChange:this.handleSelectChange,options:this.state.categories})))))}}]),t}(r.a.Component),ee=Object(i.h)(Q),te=function(e){function t(e){return Object(c.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=null;return r.a.createElement($.a,{collapseOnSelect:!0,expand:"lg",bg:"light",variant:"light",fixed:"top"},r.a.createElement(l.b,{to:"/",className:"navbar-brand",style:{fontFamily:"Megrim, cursive",fontSize:"35px"}},"Bloom"),r.a.createElement($.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement($.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(J.a,{className:"left",style:{marginRight:"120px"}},r.a.createElement(l.b,{to:"/about",className:"nav-link"},"About")),r.a.createElement((function(a){return"/search"==Object(i.g)().pathname?r.a.createElement(J.a,{className:"full-width"},r.a.createElement(ee,{className:"nav-link"})):null==e.props.user||0===Object.keys(e.props.user).length&&e.props.user.constructor===Object?r.a.createElement(J.a,{className:"left"},r.a.createElement(l.b,{to:"/login",className:"nav-link"},"Login"),r.a.createElement(l.b,{to:"/signup",className:"nav-link"},"Signup")):(t="0"!=e.props.user.role?r.a.createElement(Y.a,{title:"Manage Stores",id:"basic-nav-dropdown"},r.a.createElement(Y.a.Item,{href:"/users/"+e.props.user.id+"/stores"},"Dashboard"),r.a.createElement(Y.a.Divider,null),r.a.createElement(Y.a.Item,{href:"/store/signup"},"Create Store")):r.a.createElement(l.b,{to:"/store/signup",className:"nav-link"},"Create Store"),r.a.createElement(J.a,null,t,r.a.createElement(Y.a,{title:"Profile",id:"basic-nav-dropdown"},r.a.createElement(Y.a.Item,{href:"/users/"+e.props.user.id},"View"),r.a.createElement(Y.a.Item,{href:"/users/edit/"+e.props.user.id},"Edit")),r.a.createElement(l.b,{to:"/users/"+e.props.user.id+"/appointments",className:"nav-link"},"My Appointments"),r.a.createElement(l.b,{style:{position:"absolute",right:60},to:"/logout",className:"nav-link"},"Logout")))}),null)))}}]),t}(r.a.Component),ae=Object(x.b)((function(e){return{user:e.userReducer.user}}))(te),ne=a(58),re=(a(319),a(107)),se={user:{},error:{}};var oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN_FAILURE":return Object.assign({},e,{error:t.error});case"USER_LOGIN_SUCCESS":case"USER_SIGNUP_SUCCESS":return Object.assign({},e,{user:t.user});case"USER_SIGNUP_FAILURE":return Object.assign({},e,{error:t.error});case"EDIT_USER_SUCCESS":return Object.assign({},e,{user:t.user});case"USER_LOGOUT":return Object.assign({},e,{user:{}});case"UPDATE_ROLE":var a=e.user;return a.role=t.role,Object.assign({},e,{user:a});default:return e}},le={alert:{}};var ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ALERT":return Object.assign({},e,{alert:t.message});case"REMOVE_ALERT":return Object.assign({},e,{alert:{}});default:return e}};var ce={stores:[]};var ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_STORE":var a=e.stores;return a?a.push(t.store):a=[t.store],Object.assign({},e,{stores:a});default:return e}},me=Object(O.c)({userReducer:oe,alertReducer:ie,storeReducer:ue}),pe=a(275);var de=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return void console.log(t)}}(),he=Object(O.d)(me,de,Object(O.a)(pe.a));he.subscribe((function(){return function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(a){console.log(a)}}(he.getState())}));var ve=he,Ee=a(135),ge=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={selected:[],address:"",distance:1,redirect:!1,center:{lat:"",lng:""},category:Ee.getCategories(),nails:!1,hair:!1,facials:!1,barber:!1,spa:!1,makeup:!1},a.autocomplete=null,a.redirect=!1,a.handlePlaceSelect=a.handlePlaceSelect.bind(Object(d.a)(a)),a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(a)),a.onSelect=a.onSelect.bind(Object(d.a)(a)),a.onRemove=a.onRemove.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"onSelect",value:function(e,t){this.setState({selected:e}),"Nail Salon"==(t=t.name)?this.setState({nails:!0}):"Hair Salon"==t?this.setState({hair:!0}):"Facials"==t?this.setState({facials:!0}):"Spa & Wellness"==t?this.setState({spa:!0}):"Makeup"==t?this.setState({makeup:!0}):"Barbershops"==t&&this.setState({barber:!0})}},{key:"onRemove",value:function(e,t,a){this.setState({selected:e}),"Nail Salon"==(t=t.name)?this.setState({nails:!1}):"Hair Salon"==t?this.setState({hair:!1}):"Facials"==t?this.setState({facials:!1}):"Spa & Wellness"==t?this.setState({spa:!1}):"Makeup"==t?this.setState({makeup:!1}):"Barbershops"==t&&this.setState({barber:!1})}},{key:"componentDidMount",value:function(){var e=window.google;this.autocomplete=new e.maps.places.Autocomplete(document.getElementById("autocomplete"),{}),this.autocomplete.addListener("place_changed",this.handlePlaceSelect)}},{key:"handlePlaceSelect",value:function(){var e=this.autocomplete.getPlace(),t=e.address_components.map((function(e){return e.long_name})).join(", ");this.setState({address:t,center:{lat:e.geometry.location.lat(),lng:e.geometry.location.lng()}})}},{key:"handleChange",value:function(e){this.setState({distance:parseInt(e.target.value.split(" ")[0])})}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),this.state.address){var a=(0,Ee.queryString)(this.state);console.log(this.state),console.log(a);var n="http://bloom-490-dev.us-east-1.elasticbeanstalk.com";console.log("environment is: ","production"),console.log("fetch prod is: ","http://bloom-490-dev.us-east-1.elasticbeanstalk.com"),console.log("fetch dev is: ","http://localhost:8081"),console.log("fetch domain is: ",n),fetch(n+"/stores"+a,{method:"GET",headers:{"Content-type":"application/json"}}).then((function(e){if(200===e.status)return e.json();ve.dispatch(I(e))})).then((function(e){if(e){var n=t.state;n.stores=e,n.redirect=!0,t.props.history.push({pathname:"/search",search:a,state:n})}}))}}},{key:"render",value:function(){return r.a.createElement(v.a,{className:"book_window"},r.a.createElement(k.a,{className:"formBody rounded",onSubmit:this.handleSubmit},r.a.createElement("h3",null,"Book Now"),r.a.createElement(k.a.Group,{controlId:"autocomplete"},r.a.createElement(E.a,null,r.a.createElement(k.a.Label,null,"Address"),r.a.createElement(k.a.Control,{type:"text",placeholder:"Try 'New Haven, CT'",autoComplete:"new-password"}))),r.a.createElement(k.a.Group,null,r.a.createElement(E.a,null,r.a.createElement(k.a.Label,null,"Distance"),r.a.createElement(k.a.Control,{as:"select",id:"distance",onChange:this.handleChange},r.a.createElement("option",null,"1 mile"),r.a.createElement("option",null,"5 miles"),r.a.createElement("option",null,"10 miles"),r.a.createElement("option",null,"25 miles"),r.a.createElement("option",null,"50 miles")))),r.a.createElement(k.a.Group,{controlId:"category"},r.a.createElement(E.a,null,r.a.createElement(k.a.Label,null,"Category"),r.a.createElement(re.Multiselect,{options:this.state.category,onSelect:this.onSelect,onRemove:this.onRemove,placeholder:"Category",closeIcon:"cancel",displayValue:"name",avoidHighlightFirstOption:!0,style:{multiselectContainer:{width:"100%"},groupHeading:{width:50,maxWidth:50},chips:{background:"#587096",height:35},inputField:{color:"black"},searchBox:{minWidth:"100%",height:"30",backgroundColor:"white",borderRadius:"5px"}}}))),r.a.createElement(M.a,{disabled:!this.state.address,style:{backgroundColor:"#8CAFCB",border:"0px"},type:"submit"},"Submit")))}}]),t}(r.a.Component),fe=Object(i.h)(ge),ye=(a(254),a(276)),be=a.n(ye),ke=a(277),Me=a.n(ke),Ce=a(278),we=a.n(Ce),Se=a(279),He=a.n(Se),_e=a(280),Te=a.n(_e),je=a(281),xe=a.n(je),Oe=a(282),Ne=a.n(Oe),Ie=(a(320),a(212)),De=a.n(Ie),We=a(283),Re=a.n(We),Pe=a(31),Ge=a.n(Pe),Be=a(39),Le=a(135),Ae=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={stores:[],address:"",distance:1,redirect:!1,center:{lat:"",lng:""},nails:!1,hair:!1,facials:!1,barber:!1,spa:!1,makeup:!1},a.getStores=a.getStores.bind(Object(d.a)(a)),a.getCurrentLocation=a.getCurrentLocation.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"getCurrentLocation",value:function(){var e=Object(Be.a)(Ge.a.mark((function e(){var t,a=this;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.google,!navigator.geolocation){e.next=9;break}return this._displayLocation=function(e,n){var r=new t.maps.Geocoder,s=new t.maps.LatLng(e,n);a.geocodeAddress(r,s)},this.geoSuccess=function(e){a._displayLocation(e.coords.latitude,e.coords.longitude)},this.geoError=function(e){switch(e.code){case e.TIMEOUT:console.log("Browser geolocation error !\n\nTimeout.");break;case e.PERMISSION_DENIED:console.log("Only secure origins are allowed");break;case e.POSITION_UNAVAILABLE:console.log("Browser geolocation error !\n\nPosition unavailable.");break;default:console.log(e.code)}},e.next=7,navigator.geolocation.getCurrentPosition(this.geoSuccess,this.geoError);case 7:e.next=10;break;case 9:console.log("Geolocation is not supported for this Browser/OS.");case 10:this.geoCodeCallback=function(e,t,n){if(t===window.google.maps.GeocoderStatus.OK)if(e[0]){var r=e[0].formatted_address,s=r.split(",");s[s.length-3];console.log("My Current Location:",r),a.setState({address:r})}else console.log("address not found");else console.log(t)},this.geocodeAddress=function(e,t){a.setState({center:{lat:t.lat(),lng:t.lng()}}),e.geocode({location:t},a.geoCodeCallback)};case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(Be.a)(Ge.a.mark((function e(t,a){var n,r=this;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.address==this.state.address){e.next=6;break}return e.next=3,this.setState(Object(b.a)({},this.props.id,!0));case 3:console.log(this.state),n=Le.queryString(this.state),fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/stores"+n,{method:"GET",headers:{"Content-type":"application/json"}}).then((function(e){if(200===e.status)return e.json();ve.dispatch(I(e))})).then((function(e){if(e){var t=r.state;t.stores=e,t.redirect=!0,r.props.history.push({pathname:"/search",search:n,state:t})}}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getStores",value:function(){var e=Object(Be.a)(Ge.a.mark((function e(){return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getCurrentLocation();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{onClick:function(){return e.getStores()},className:"image_container",style:this.props.style},r.a.createElement("img",{src:this.props.img,alt:"paint",className:"images"}),r.a.createElement("p",{className:"text"}," ",this.props.text," "))}}]),t}(r.a.Component);function Fe(e){e.listen;return(0,e.children)(function(){var e=Object(n.useState)({xys:[0,0,1]}),t=Object(ne.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){var e,t=!0;return t&&(e=function(e){return r({xys:(t=e.clientX,a=e.clientY,[-(a-window.innerHeight/2)/20,(t-window.innerWidth/2)/80,1.04])});var t,a},function(e){return r({xys:[0,0,1]})},window.addEventListener("mousemove",e)),function(){t=!1,window.removeEventListener("mousemove",e)}})),a}())}function qe(e){e.listen;return(0,e.children)(function(){var e=Object(n.useState)(window.innerWidth),t=Object(ne.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){var e,t=!0;return t&&(e=function(){r(window.innerWidth)},window.addEventListener("resize",e)),function(){t=!1,window.removeEventListener("resize",e)}})),a}())}var Ue=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={Visible:!1},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"goToStore",value:function(){this.props.history.push({pathname:"/store/signup"})}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{fluid:!0,style:{backgroundColor:"#c0cbcf"}},r.a.createElement("div",null,r.a.createElement(Fe,null,(function(e){return r.a.createElement("img",{src:y.a,alt:"paint",style:{top:80,left:0,position:"absolute",height:"700px",width:"100%",transform:"perspective(600px) rotateX(".concat(e.xys[0]/10,"deg) rotateY(").concat(e.xys[1]/10,"deg) scale(").concat(e.xys[2],")")}})}))),r.a.createElement(E.a,{style:{marginTop:120,height:500,marginLeft:"10%"}},r.a.createElement(qe,null,(function(e){return e>1e3?r.a.createElement(fe,null):null})),r.a.createElement(g.a,{style:{margin:"10%",marginTop:"0%"}},r.a.createElement(E.a,{style:{marginLeft:"10%",marginTop:"2%"}},r.a.createElement("p",{className:"welcome"}," Welcome to "),r.a.createElement("p",{className:"bloom"}," Bloom ")),r.a.createElement("p",{className:"subtitle"}," A platform that helps you find salons, beauty experts and stylists that are located near your house and will soon become your favorite salons. ETC ETC We can change that later. "))),r.a.createElement(g.a,{className:"type_container"},r.a.createElement(Re.a,{onChange:function(t){e.setState({Visible:t})},active:!this.state.Visible},r.a.createElement("p",{style:{fontSize:25,fontFamily:"Bellota, cursive",fontWeight:"bold"}}," At Bloom ")),r.a.createElement(g.a,null,this.state.Visible?r.a.createElement(De.a,{className:"typist",avgTypingDelay:100,startDelay:10,cursor:{show:!0,blink:!0,element:"|"}},"You can find hair salons.",r.a.createElement(De.a.Backspace,{count:12,delay:200}),r.a.createElement("span",null," nail salons."),r.a.createElement(De.a.Backspace,{count:12,delay:200}),r.a.createElement("span",null," beauty salons and more.")):null)),r.a.createElement(g.a,{style:{marginLeft:"2%",marginTop:"3%"}},r.a.createElement(E.a,null,r.a.createElement(Ae,{history:this.props.history,id:"hair",img:we.a,text:"Hair Salons"}),r.a.createElement(Ae,{history:this.props.history,id:"makeup",img:He.a,text:"Makeup Artists"}),r.a.createElement(Ae,{history:this.props.history,id:"barber",img:be.a,text:"Barber Shops"})),r.a.createElement(E.a,null,r.a.createElement(Ae,{history:this.props.history,id:"nails",img:xe.a,text:"Nail Salons"}),r.a.createElement(Ae,{history:this.props.history,id:"facials",img:Me.a,text:"Facials"}),r.a.createElement(Ae,{history:this.props.history,id:"spa",img:Te.a,text:"Spa"}))),r.a.createElement(g.a,{style:{marginTop:"8%",backgroundColor:"#e8e3d8"}},r.a.createElement(E.a,null,r.a.createElement(g.a,{style:{margin:"5%",marginTop:"10%"}},r.a.createElement("p",{className:"header"}," Are you a salon owner? "),r.a.createElement("p",{style:{fontSize:20}}," Join our community by signing up your salon today! Join our community by signing up your salon today. Join our community by signing up your salon today. Join our community by signing up your salon today. Join our community by signing up your salon today. "),r.a.createElement(M.a,{onClick:function(){return e.goToStore()},style:{marginTop:"5%",backgroundColor:"#354B74",border:0}}," Learn More ")),r.a.createElement("img",{src:Ne.a,className:"salon",alt:"paint"}))))}}]),t}(r.a.Component),Ve=(a(322),function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(v.a,{fluid:!0},r.a.createElement("img",{src:y.a,alt:"paint",style:{top:0,left:0,position:"absolute",height:"100%",width:"100%",filter:"grayscale(0.4)"}}),r.a.createElement(E.a,{className:"justify-content-center"},r.a.createElement(g.a,{xs:12,sm:11,md:10,lg:9},r.a.createElement("div",{className:"container_about"},r.a.createElement("h1",{className:"about"},"~ About Us ~"),r.a.createElement("p",{style:{fontSize:22,marginTop:"5%"}},"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum")))))}}]),t}(r.a.Component)),ze=a(156),Je=(a(323),function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(ze.a,{style:this.props.style,interval:""},this.props.pictures.map((function(t,a){return r.a.createElement(ze.a.Item,{key:"pic-"+a},r.a.createElement("img",{style:e.props.img,src:t.url,alt:"Slide "+a}))})))}}]),t}(r.a.Component)),Ye=a(67),$e=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={pictures:[]},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(g.a,{xs:12,className:"my-3 px-0 h-100"},r.a.createElement(Ye.a,{style:{height:"100%"}},r.a.createElement(E.a,{style:{height:"100%"}},r.a.createElement(g.a,{md:6,className:"vertical-align-contents px-0 h-100 w-100"},r.a.createElement(ze.a,{interval:""},this.props.store.pictures.map((function(e,t){return r.a.createElement(ze.a.Item,{key:"pic-"+t},r.a.createElement(V.a,{fluid:!0,src:e.url,alt:"Slide "+t}))})))),r.a.createElement(g.a,{md:6,className:"vertical-align-contents px-0 h-100"},r.a.createElement(Ye.a.Body,null,r.a.createElement("div",null,r.a.createElement(Ye.a.Title,{onClick:function(){return e.props.onClickFunctionStore(e.props.store.id)},style:{cursor:"pointer"}},this.props.store.name),r.a.createElement(Ye.a.Text,{className:"mb-3"},this.props.store.description)),r.a.createElement(M.a,{style:{backgroundColor:"#8CAFCA",border:0},onClick:function(){return e.props.onClickFunctionBook(e.props.store.id)}},"Book Now"))))))}}]),t}(r.a.Component),Ze=(a(324),a(213)),Ke=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).onMarkerClick=function(e,t,n){return a.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0,activeMarkerIndex:t.id})},a.onClose=function(e){a.state.showingInfoWindow&&a.setState({showingInfoWindow:!1,activeMarker:null})},a.state={showingInfoWindow:!1,activeMarker:{},selectedPlace:{},activeMarkerIndex:0},a.onMarkerClick=a.onMarkerClick.bind(Object(d.a)(a)),a.onClose=a.onClose.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"displayMarkers",value:function(){var e=this;return this.props.stores?this.props.stores.map((function(t,a){return r.a.createElement(Ze.Marker,{key:"store-"+a,id:a,position:{lat:t.lat,lng:t.lng},onClick:e.onMarkerClick,name:t.name})})):null}},{key:"onClickFunction",value:function(e){console.log("Here1")}},{key:"componentDidUpdate",value:function(e,t){this.props}},{key:"render",value:function(){var e=this;return r.a.createElement(Ze.Map,{google:this.props.google,zoom:this.props.zoom,style:this.props.mapStyles,initialCenter:this.props.center},this.displayMarkers(),r.a.createElement(Ze.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow,onClose:this.onClose},r.a.createElement((function(t){return e.props.stores?r.a.createElement("h4",{className:"mb-0"},e.props.stores[e.state.activeMarkerIndex].name):null}),null)))}}]),t}(n.Component),Xe=a(146),Qe=function(e){return r.a.createElement(Xe.a,Object.assign({speed:2,width:600,height:700,viewBox:"0 0 700 750",backgroundColor:"#f5f5f5",foregroundColor:"#dbdbdb"},e),r.a.createElement("rect",{x:"4",y:"0",rx:"3",ry:"3",width:"122",height:"26"}),r.a.createElement("rect",{x:"4",y:"68",rx:"3",ry:"3",width:"7",height:"330"}),r.a.createElement("rect",{x:"6",y:"390",rx:"3",ry:"3",width:"639",height:"8"}),r.a.createElement("rect",{x:"640",y:"68",rx:"3",ry:"3",width:"6",height:"330"}),r.a.createElement("rect",{x:"4",y:"70",rx:"3",ry:"3",width:"295",height:"325"}),r.a.createElement("rect",{x:"346",y:"101",rx:"3",ry:"3",width:"231",height:"29"}),r.a.createElement("rect",{x:"382",y:"183",rx:"3",ry:"3",width:"102",height:"7"}),r.a.createElement("rect",{x:"372",y:"151",rx:"3",ry:"3",width:"178",height:"6"}),r.a.createElement("rect",{x:"375",y:"199",rx:"3",ry:"3",width:"178",height:"6"}),r.a.createElement("rect",{x:"386",y:"222",rx:"3",ry:"3",width:"102",height:"7"}),r.a.createElement("rect",{x:"375",y:"249",rx:"3",ry:"3",width:"178",height:"6"}),r.a.createElement("rect",{x:"386",y:"273",rx:"3",ry:"3",width:"102",height:"7"}),r.a.createElement("rect",{x:"375",y:"300",rx:"3",ry:"3",width:"178",height:"6"}),r.a.createElement("rect",{x:"5",y:"68",rx:"3",ry:"3",width:"639",height:"7"}),r.a.createElement("rect",{x:"4",y:"350",rx:"3",ry:"3",width:"122",height:"26"}),r.a.createElement("rect",{x:"4",y:"418",rx:"3",ry:"3",width:"7",height:"330"}),r.a.createElement("rect",{x:"6",y:"740",rx:"3",ry:"3",width:"639",height:"8"}),r.a.createElement("rect",{x:"640",y:"418",rx:"3",ry:"3",width:"6",height:"330"}),r.a.createElement("rect",{x:"4",y:"420",rx:"3",ry:"3",width:"295",height:"325"}),r.a.createElement("rect",{x:"346",y:"451",rx:"3",ry:"3",width:"231",height:"29"}),r.a.createElement("rect",{x:"382",y:"533",rx:"3",ry:"3",width:"102",height:"7"}),r.a.createElement("rect",{x:"372",y:"501",rx:"3",ry:"3",width:"178",height:"6"}),r.a.createElement("rect",{x:"375",y:"549",rx:"3",ry:"3",width:"178",height:"6"}),r.a.createElement("rect",{x:"386",y:"572",rx:"3",ry:"3",width:"102",height:"7"}),r.a.createElement("rect",{x:"375",y:"599",rx:"3",ry:"3",width:"178",height:"6"}),r.a.createElement("rect",{x:"386",y:"623",rx:"3",ry:"3",width:"102",height:"7"}),r.a.createElement("rect",{x:"375",y:"650",rx:"3",ry:"3",width:"178",height:"6"}),r.a.createElement("rect",{x:"5",y:"418",rx:"3",ry:"3",width:"639",height:"7"}))},et=function(e){return r.a.createElement(Xe.a,Object.assign({speed:2,width:"100%",height:"100%",viewBox:"0 0 600 1300",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb"},e),r.a.createElement("rect",{x:"5",y:"20",rx:"0",ry:"0",width:"222",height:"50"}),r.a.createElement("rect",{x:"5",y:"103",rx:"0",ry:"0",width:"5",height:"800"}),r.a.createElement("rect",{x:"5",y:"103",rx:"0",ry:"0",width:"580",height:"5"}),r.a.createElement("rect",{x:"585",y:"103",rx:"0",ry:"0",width:"5",height:"800"}),r.a.createElement("rect",{x:"5",y:"900",rx:"0",ry:"0",width:"580",height:"5"}),r.a.createElement("rect",{x:"5",y:"103",rx:"0",ry:"0",width:"580",height:"450"}),r.a.createElement("rect",{x:"55",y:"603",rx:"0",ry:"0",width:"480",height:"40"}),r.a.createElement("rect",{x:"55",y:"663",rx:"0",ry:"0",width:"480",height:"20"}),r.a.createElement("rect",{x:"70",y:"703",rx:"0",ry:"0",width:"450",height:"20"}),r.a.createElement("rect",{x:"55",y:"743",rx:"0",ry:"0",width:"480",height:"20"}),r.a.createElement("rect",{x:"250",y:"803",rx:"0",ry:"0",width:"100",height:"50"}))},tt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={stores:[],zoom:11,mapStyles:{width:"100%",height:"100%"},center:{lat:"",lng:""},loading:!0,query:a.props.location.search,ownUpdate:!1},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){if(this.props.location.state&&this.props.location.state.stores&&this.props.location.state.center)this.setState({stores:this.props.location.state.stores,center:this.props.location.state.center,loading:!1});else{var e=window.location.href.split("search"),t="";e.length>1&&(t=e[1]),this.getResults(!1,t)}}},{key:"componentDidUpdate",value:function(e){this.props.location&&this.props.location.search!==e.location.search&&this.getResults(!0,this.props.location.search)}},{key:"getResults",value:function(e,t){var a=this;fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/stores"+t,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){if(200===e.status)return e.json();console.log("ERROR!")})).then((function(t){t&&a.setState({stores:t,center:{lat:t[0].lat,lng:t[0].lng},loading:!1,ownUpdate:e})}))}},{key:"render",value:function(){var e=this,t=function(t){return e.state.stores.map((function(e){return r.a.createElement($e,{key:"store-"+e.id,store:e,onClickFunctionBook:function(){return window.location.href="/book/"+e.id},onClickFunctionStore:function(){return window.location.href="/stores/"+e.id}})}))};return r.a.createElement("div",null,r.a.createElement(E.a,{className:"restrict-viewport mx-0"},r.a.createElement(g.a,{xs:12,xl:6,className:"px-5 my-3 h-100"},r.a.createElement((function(a){return e.state.loading?r.a.createElement(E.a,null,r.a.createElement(g.a,{xs:"12"},r.a.createElement(Qe,{className:"d-none d-xl-block"}),r.a.createElement(et,{className:"d-block d-xl-none"}))):e.state.stores.length>0?r.a.createElement("div",null,r.a.createElement("h3",{className:"text-left"}," ",e.state.stores.length," results "),r.a.createElement(E.a,{className:"mx-0 justify-content-center search-cards-row"},r.a.createElement(t,null))):r.a.createElement(E.a,null,r.a.createElement(g.a,{xs:"12"},r.a.createElement("h5",null,"No results!")))}),null)),r.a.createElement(g.a,{id:"map",xs:12,xl:6},r.a.createElement("div",{className:"position-fixed h-100 w-50 d-none d-xl-block"},r.a.createElement((function(t){return r.a.createElement(Ke,{google:window.google,stores:e.state.stores,center:e.state.center,zoom:e.state.zoom,mapStyles:e.state.mapStyles})}),null)))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.ownUpdate?null:e.location.search!==t.query?{loading:!0}:null}}]),t}(r.a.Component),at=a(38),nt=a(53),rt=(a(337),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={categories:["Nails","Hair","Makeup","Eyelashes","Eyebrows","Facials","Skin Care"]},a.handleChange=a.handleChange.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){var t=this.props.services.find((function(t){return t.name===e.target.id}));this.props.selectedServices.find((function(e){return e.name===t.name}))?this.props.updateReservation(!0,t):this.props.updateReservation(!1,t),this.setState(Object(b.a)({},e.target.id,!this.state[e.target.id]))}},{key:"render",value:function(){var e=this;return r.a.createElement(Ye.a,{className:"py-3"},r.a.createElement("h3",null,"Select Services"),r.a.createElement(E.a,{className:"text-left"},r.a.createElement(g.a,null,r.a.createElement((function(t){return t.services?t.categories.map((function(a){return r.a.createElement("div",{id:a,key:a,className:"pl-4"},r.a.createElement("h4",null,a),t.services.map((function(t){if(t.category==a)return r.a.createElement("div",{key:t.name},r.a.createElement(E.a,null,r.a.createElement(g.a,{xs:"8",sm:"10"},r.a.createElement(k.a.Check,{custom:!0,type:"checkbox",id:t.name,label:t.name,checked:e.props.selectedServices.find((function(e){return e.name===t.name})),onChange:e.handleChange,className:"formCustom"})),r.a.createElement(g.a,{xs:"4",sm:"2"},r.a.createElement("h5",{className:"pt-2 text-center"},"$",t.cost.toFixed(2)))))})))})):null}),{categories:this.state.categories,services:this.props.services}))),r.a.createElement(E.a,{className:"justify-content-center"},r.a.createElement(g.a,{md:"3"},r.a.createElement(M.a,{block:!0,onClick:this.props.handleSubmit},"Next"))))}}]),t}(r.a.Component)),st=(a(338),a(221)),ot=a(284),lt=a.n(ot),it=(a(339),a(340),a(63)),ct=a.n(it),ut=a(26);function mt(){var e=Object(nt.a)(["\n  display: block;\n  margin: 0 auto;\n"]);return mt=function(){return e},e}var pt=Object(ut.css)(mt()),dt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleDateChange=function(e){e.getMonth()!=a.state.startDate.getMonth()&&(a.setState({loading:!0}),fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/stores/"+a.props.store_id+"/appointments/month/"+(parseInt(e.getMonth())+1),{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){if(200===e.status)return e.json();ve.dispatch(I(e))})).then((function(t){var n=t.map((function(e){return e.date=new Date(e.date),e}));a.setState({appointments:n,currDate:e,startDate:e,loading:!1})}))),a.setState({currDate:e})},a.handleSelectChange=function(e){a.setState({selectedTime:parseInt(e.target.value)})},a.handleSlotClick=function(e){a.props.updateAppointments(e),a.props.handleSubmit()},a.state={startDate:new Date,currDate:new Date,selectedTime:540,loading:!0,appointments:[]},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"convertMinsToHrsMins",value:function(e){var t=Math.floor(e/60),a=e%60,n=!1;return 24==t?(n=!0,t-=12):t<12?n=!0:12!=t&&(t-=12),0==(t=t<10?"0"+t:t)&&(t="12"),a=a<10?"0"+a:a,n?"".concat(t,":").concat(a,"am"):"".concat(t,":").concat(a,"pm")}},{key:"componentDidMount",value:function(){var e=this;console.log("startdate is: ",this.state.startDate),fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/stores/"+this.props.store_id+"/appointments/month/"+(parseInt(this.state.startDate.getMonth())+1),{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){if(200===e.status)return e.json();ve.dispatch(I(e))})).then((function(t){var a=t.map((function(e){return e.date=new Date(e.date+" UTC"),e}));console.log("received these appointments: ",a),e.setState({appointments:a,loading:!1})}))}},{key:"render",value:function(){var e=this,t=function(){for(var t=[],a=[],n=function(n){for(var s=n,o=!1,l=[],i=e.props.workersSchedules.filter((function(t){return t.day_of_the_week==e.state.currDate.getDay()})),c=!0,u=s,m=0,p=0,d=function(){var t=!0,a=e.props.selectedServices[p],n=i[m].worker_id;if(i[m].start_time>u||i[m].end_time<u+a.duration)t=!1;else for(var r=e.state.appointments.filter((function(t){return t.worker_id==n&&t.date.setHours(0,0,0,0)==e.state.currDate.setHours(0,0,0,0)})),s=0;s<r.length;s++)if(u>=r[s].start_time&&u<=r[s].end_time||u+a.duration>=r[s].start_time&&u+a.duration<=r[s].end_time){t=!1;break}t?(l.push({worker_id:n,service_id:a.id,start_time:u,end_time:u+a.duration,price:a.cost,date:e.state.startDate}),u+=a.duration,m=0,(p+=1)==e.props.selectedServices.length&&(o=!0)):m+1<i.length?m+=1:c=!1};c&&!o;)d();o&&(a.push(l),t.push(r.a.createElement(M.a,{className:"mt-3 mx-2",key:n,onClick:function(){return e.handleSlotClick(l)}},e.convertMinsToHrsMins(n))))},s=e.state.selectedTime;s<e.state.selectedTime+120&&s+e.props.time<=e.props.storeHours[e.state.currDate.getDay()].close_time;s+=15)n(s);return 0==t.length?r.a.createElement("h1",null,"No available appointments"):t};return r.a.createElement(Ye.a,{text:"dark",className:"mt-0 py-3",style:{overflow:"visible"}},r.a.createElement("div",{id:"date-selection-form"},r.a.createElement("h3",null,"Select Appointment Time"),r.a.createElement(Ye.a.Body,{className:"pt-0"},r.a.createElement(E.a,{className:"justify-content-center"},r.a.createElement(g.a,{xs:"11",md:"6",className:"mt-3"},r.a.createElement("div",{className:"customDatePickerWidth"},r.a.createElement(lt.a,{className:"form-control",selected:this.state.currDate,onChange:this.handleDateChange,minDate:new Date,popperModifiers:{flip:{behavior:["bottom"]}}}))),r.a.createElement(g.a,{xs:"11",md:"6",className:"mt-3"},r.a.createElement(k.a,null,r.a.createElement(k.a.Control,{as:"select",value:this.state.selectedTime,onChange:this.handleSelectChange.bind(this)},r.a.createElement((function(t){for(var a=[],n=e.props.storeHours[e.state.startDate.getDay()].open_time;n+e.props.time<=e.props.storeHours[e.state.startDate.getDay()].close_time;n+=60)a.push(r.a.createElement("option",{key:n,value:n},e.convertMinsToHrsMins(n)));return a}),{date:this.state.startDate}))))),r.a.createElement((function(a){return e.state.loading?r.a.createElement(E.a,{className:"vertical-center"},r.a.createElement(g.a,null,r.a.createElement(ct.a,{css:pt,size:20,color:"#2196f3",loading:e.state.isLoading}))):r.a.createElement(E.a,{className:"justify-content-center text-xs-center text-sm-left pl-2"},r.a.createElement(g.a,{xs:"12",md:"11",className:"px-1"},r.a.createElement(t,null)))}),null))))}}]),t}(r.a.Component),ht=(a(260),a(44)),vt=a.n(ht);function Et(){var e=Object(nt.a)(["\n  display: block;\n  margin: 0 auto;\n"]);return Et=function(){return e},e}var gt=Object(ut.css)(Et()),ft=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={firstName:"",lastName:"",phone:"",email:"",user_id:-1},a.triggerAppointmentDisplay=a.triggerAppointmentDisplay.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"triggerAppointmentDisplay",value:function(e){this.props.history.push({pathname:"/appointments/"+e,state:{appointmentGroupId:e}})}},{key:"convertMinsToHrsMins",value:function(e){var t=Math.floor(e/60),a=e%60,n=!1;return 24==t?(n=!0,t-=12):t<12?n=!0:12!=t&&(t-=12),0==(t=t<10?"0"+t:t)&&(t="12"),a=a<10?"0"+a:a,n?"".concat(t,":").concat(a,"am"):"".concat(t,":").concat(a,"pm")}},{key:"componentDidMount",value:function(){if(vt.a.get("user")){var e=JSON.parse(vt.a.get("user").substring(2));this.setState({firstName:e.first_name,lastName:e.last_name,email:e.email,phone:e.phone,user_id:e.id})}}},{key:"render",value:function(){var e=this;return r.a.createElement((function(t){return e.state.loading?r.a.createElement(Ye.a,{text:"dark",className:"mt-0 py-3"},r.a.createElement(Ye.a.Body,{className:"pt-0"},r.a.createElement(E.a,{className:"vertical-center"},r.a.createElement(g.a,null,r.a.createElement(ct.a,{css:gt,size:20,color:"#2196f3",loading:e.state.isLoading}))))):r.a.createElement(Ye.a,{text:"dark",className:"mt-0 py-3",id:"date-selection-form"},r.a.createElement(Ye.a.Title,null,"Book Appointment"),r.a.createElement(Ye.a.Body,{className:"pt-0"},r.a.createElement(E.a,{className:"justify-content-center"},r.a.createElement(A.a,{initialValues:{firstName:e.state.firstName,lastName:e.state.lastName,phone:e.state.phone,email:e.state.email,user_id:e.state.user_id},onSubmit:function(t){t.appointments=e.props.appointments;var a=e.triggerAppointmentDisplay;fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/stores/"+e.props.store_id+"/appointments/new",{method:"POST",headers:{"Content-type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(t)}).then((function(e){if(200===e.status)return e.json();ve.dispatch(I(e))})).then(function(){var e=Object(Be.a)(Ge.a.mark((function e(t){return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&a(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},(function(e){var t=e.values,a=e.errors,n=e.touched,s=e.handleChange,o=e.handleBlur,l=e.handleSubmit;e.setFieldValue;return r.a.createElement(k.a,{className:"form-style"},r.a.createElement(k.a.Group,{controlId:"formFirstName"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.m,null))),r.a.createElement(k.a.Control,{type:"text",name:"firstName",value:t.firstName,placeholder:"First Name",onChange:s,onBlur:o,className:n.firstName&&a.firstName?"error":null})),n.firstName&&a.firstName?r.a.createElement("div",{className:"error-message"},a.firstName):null),r.a.createElement(k.a.Group,{controlId:"formLastName"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.m,null))),r.a.createElement(k.a.Control,{type:"text",name:"lastName",value:t.lastName,placeholder:"Last Name",onChange:s,onBlur:o,className:n.lastName&&a.lastName?"error":null})),n.lastName&&a.lastName?r.a.createElement("div",{className:"error-message"},a.lastName):null),r.a.createElement(k.a.Group,{controlId:"formPhone"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.k,null))),r.a.createElement(k.a.Control,{type:"text",value:t.phone,placeholder:"Phone Number",name:"phone",onChange:s,onBlur:o,className:n.phone&&a.phone?"error":null})),n.phone&&a.phone?r.a.createElement("div",{className:"error-message"},a.phone):null),r.a.createElement(k.a.Group,{controlId:"formEmail"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.d,null))),r.a.createElement(k.a.Control,{type:"email",value:t.email,placeholder:"Email",name:"email",onChange:s,onBlur:o,className:n.email&&a.email?"error":null})),n.email&&a.email?r.a.createElement("div",{className:"error-message"},a.email):null),r.a.createElement(M.a,{onClick:l},"Submit"))})))))}),null)}}]),t}(r.a.Component),yt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={displayLogin:!0},a.toggleLogin=a.toggleLogin.bind(Object(d.a)(a)),a.triggerSignInRedirect=a.triggerSignInRedirect.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"triggerSignInRedirect",value:function(){this.props.history.push({pathname:"/login",state:{appointments:this.props.appointments}})}},{key:"triggerSignUpRedirect",value:function(){this.props.history.push({pathname:"/signup",state:{appointments:this.props.appointments}})}},{key:"toggleLogin",value:function(e){this.setState({displayLogin:e})}},{key:"render",value:function(){var e=this;return r.a.createElement((function(t){return e.state.displayLogin?r.a.createElement(L,{appointments:e.props.appointments,store_id:e.props.store_id,history:e.props.history,title:"Login to continue.",toggleLogin:e.toggleLogin}):r.a.createElement(U,{appointments:e.props.appointments,store_id:e.props.store_id,history:e.props.history,toggleLogin:e.toggleLogin})}),null)}}]),t}(r.a.Component);function bt(){var e=Object(nt.a)(["\n  display: block;\n  margin: 0 auto;\n"]);return bt=function(){return e},e}var kt="http://bloom-490-dev.us-east-1.elasticbeanstalk.com",Mt=Object(ut.css)(bt()),Ct=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).updateReservation=function(e,t){e?(a.setState({time:a.state.time-t.duration}),a.setState({total:a.state.total-t.cost}),a.setState({selectedServices:a.state.selectedServices.filter((function(e){return t.id!==e.id}))})):(a.setState({time:a.state.time+t.duration}),a.setState({total:a.state.total+t.cost}),a.setState({selectedServices:[].concat(Object(at.a)(a.state.selectedServices),[t])}))},a.backStep=function(e){var t=a.state.currentStep-1;a.setState({currentStep:t})},a.handleSubmit=function(){if(a.state.currentStep<4){var e=a.state.currentStep+1;a.setState({currentStep:e})}else alert(JSON.stringify(a.state))},a.updateAppointments=function(e){a.setState({appointments:e})},a.pluralize=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t+"s",n=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t+"s";return[1,-1].includes(Number(e))?t:a};return"object"===typeof e?function(t,a){return n(t,a,e[a])}:n(e,t,a)},a.timeConvert=function(e){var t=e/60,n=Math.floor(t),r=60*(t-n),s=Math.round(r);return n+" "+a.pluralize(n,"hour")+" and "+s+" "+a.pluralize(s,"minute")},a.prefetchSchedules=function(){Promise.all([fetch(kt+"/stores/"+a.props.match.params.store_id+"/workers/schedules",{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){return e.json()})),fetch(kt+"/stores/"+a.props.match.params.store_id+"/storeHours",{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){return e.json()}))]).then((function(e){a.setState({storeHours:e[1],workersSchedules:e[0]})}))},a.state={storeName:null,total:0,time:0,currentStep:1,selectedServices:[],services:[],loading:!0,workers:[],workersSchedules:[],storeHours:[],appointments:"original value"},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.all([fetch(kt+"/stores/"+this.props.match.params.store_id+"/services",{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){return e.json()})),fetch(kt+"/stores/"+this.props.match.params.store_id,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){return e.json()}))]).then((function(t){var a=t[0],n=t[1];e.props.location.currentStep&&e.props.location.appointments&&e.setState({appointments:e.props.appointments,currentStep:e.props.currentStep}),e.setState({services:a,storeName:n.name,workers:n.workers,loading:!1})})),this.prefetchSchedules()}},{key:"render",value:function(){var e=this,t=this;return r.a.createElement(v.a,{fluid:!0},r.a.createElement(E.a,{noGutters:!0,className:"pt-3 pb-0"},r.a.createElement(g.a,{xs:"1"},r.a.createElement((function(t){return 1==e.state.currentStep?null:r.a.createElement(w.a,{size:"2em",className:"pt-2 pr-2",onClick:e.backStep})}),null)),r.a.createElement(g.a,{xs:"11",className:"text-left"},r.a.createElement("h2",null,"Step ",this.state.currentStep))),r.a.createElement(E.a,null,r.a.createElement(g.a,{xs:12,lg:8,className:"largeMarginBottom"},r.a.createElement((function(t){return e.state.loading?r.a.createElement(Ye.a,{className:"fullHeight"},r.a.createElement(E.a,{className:"vertical-center"},r.a.createElement(g.a,null,r.a.createElement(ct.a,{css:Mt,size:20,color:"#2196f3",loading:e.state.loading})))):1==e.state.currentStep?r.a.createElement(rt,{services:e.state.services,updateReservation:e.updateReservation,selectedServices:e.state.selectedServices,time:e.state.time,total:e.state.total,handleSubmit:e.handleSubmit,timeConvert:e.timeConvert,pluralize:e.pluralize}):2==e.state.currentStep?r.a.createElement(dt,{time:e.state.time,store_id:e.props.match.params.store_id,selectedServices:e.state.selectedServices,storeHours:e.state.storeHours,workersSchedules:e.state.workersSchedules,handleSubmit:e.handleSubmit,updateAppointments:e.updateAppointments}):vt.a.get("user")?r.a.createElement(ft,{appointments:e.state.appointments,store_id:e.props.match.params.store_id,history:e.props.history}):r.a.createElement(yt,{appointments:e.state.appointments,store_id:e.props.match.params.store_id,history:e.props.history})}),null)),r.a.createElement(g.a,{xs:12,lg:4,className:"d-none d-lg-block"},r.a.createElement(Ye.a,{text:"dark",className:"shoppingCart mt-0"},r.a.createElement(Ye.a.Header,null,"Shopping Cart"),r.a.createElement(Ye.a.Body,{className:"pt-0"},r.a.createElement(E.a,{className:"text-left"},r.a.createElement(g.a,null,r.a.createElement((function(e){if(e.services){var a=e.services.map((function(e){return r.a.createElement(st.a.Item,{variant:"light",key:e.name},r.a.createElement(E.a,null,r.a.createElement(g.a,{lg:7},r.a.createElement(E.a,null,e.name),r.a.createElement(E.a,{className:"smallText"},e.duration," ",t.pluralize(e.duration,"minute"))),r.a.createElement(g.a,{lg:5},r.a.createElement("div",{className:"float-right"},"$",e.cost.toFixed(2)))))}));return r.a.createElement(st.a,{variant:"flush"},a)}return null}),{services:this.state.selectedServices}))),r.a.createElement("h2",null,"Total: $",this.state.total.toFixed(2)),r.a.createElement("h2",null,"Time: ",this.state.time," minutes")))),r.a.createElement(g.a,{xs:12,className:"d-lg-none shoppingCartSmall px-0"},r.a.createElement(Ye.a,{bg:"light",text:"dark"},r.a.createElement(Ye.a.Header,{className:"py-1"},"Shopping Cart"),r.a.createElement(Ye.a.Body,{className:"smallPadding"},r.a.createElement("h6",null,this.state.selectedServices.length," Selected ",this.pluralize(this.state.selectedServices.length,"Service")),r.a.createElement("h6",null,"Total: $",this.state.total.toFixed(2)),r.a.createElement("h6",null,"Time: ",this.timeConvert(this.state.time)))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.location.appointments&&e.location.appointments!==t.appointments?{appointments:e.location.appointments,currentStep:e.location.currentStep}:null}}]),t}(r.a.Component),wt="http://bloom-490-dev.us-east-1.elasticbeanstalk.com";function St(e){return Ht.apply(this,arguments)}function Ht(){return(Ht=Object(Be.a)(Ge.a.mark((function e(t){var a,n;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(wt+"/getImages",{method:"POST",headers:{"Content-type":"application/json"},credentials:"include",body:JSON.stringify({prefix:t})});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _t(e,t){return Tt.apply(this,arguments)}function Tt(){return(Tt=Object(Be.a)(Ge.a.mark((function e(t,a){var n,r,s,o,l,i;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<a.length)){e.next=17;break}return r=new Date,s="_"+r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()+" "+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds(),o={fileName:t+a[n].name+s,fileType:a[n].type},e.next=7,fetch(wt+"/getPresignedUrl/",{method:"POST",headers:{"Content-type":"application/json"},credentials:"include",body:JSON.stringify(o)});case 7:return l=e.sent,e.next=10,l.json();case 10:return i=e.sent,e.next=13,fetch(i,{method:"PUT",headers:{"Content-type":a[n].type},body:a[n]});case 13:e.sent;case 14:n++,e.next=1;break;case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jt(e){return xt.apply(this,arguments)}function xt(){return(xt=Object(Be.a)(Ge.a.mark((function e(t){return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(wt+"/deleteImages/",{method:"POST",headers:{"Content-type":"application/json"},credentials:"include",body:JSON.stringify({keys:t})});case 2:e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ot=a(135),Nt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleSelectChange=function(e){var t=["formHoursMonday","formHoursTuesday","formHoursWednesday","formHoursThursday","formHoursFriday","formHoursSaturday","formHoursSunday"].indexOf(e.target.id),n=[];n="0"==e.target.querySelector("option").value?[].concat(Object(at.a)(a.state.storeHours.slice(0,t)),[{open_time:parseInt(e.target.value),close_time:a.state.storeHours[t].close_time}],Object(at.a)(a.state.storeHours.slice(t+1))):[].concat(Object(at.a)(a.state.storeHours.slice(0,t)),[{open_time:a.state.storeHours[t].open_time,close_time:parseInt(e.target.value)}],Object(at.a)(a.state.storeHours.slice(t+1))),a.setState({storeHours:n})},a.fileChangedHandler=function(e,t){t("pictureCount",e.target.files.length),a.setState({selectedFiles:e.target.files})},a.state={category:Ot.getCategories(),categoryError:!1,selected:[],selectedFiles:[],storeHours:[{open_time:540,close_time:1020},{open_time:540,close_time:1020},{open_time:540,close_time:1020},{open_time:540,close_time:1020},{open_time:540,close_time:1020},{open_time:540,close_time:1020},{open_time:540,close_time:1020}],address:[]},a.phoneRegExp=/^(\+?\d{0,4})?\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{4}\)?)?$/,a.yupValidationSchema=F.c().shape({name:F.e().min(2,"Store name must have at least 2 characters").max(100,"Store name can't be longer than 100 characters").required("Name is required"),description:F.e().min(20,"Description must have at least 20 characters").required("Description is required"),phone:F.e().matches(a.phoneRegExp,"Phone number is not valid").required("Phone number is required"),address:F.e().required("Address is required"),pictureCount:F.b().required("Pictures are required").min(1,"Must have at least one picture")}),a.autocomplete=null,a.handlePlaceSelect=a.handlePlaceSelect.bind(Object(d.a)(a)),a.triggerStoreDisplay=a.triggerStoreDisplay.bind(Object(d.a)(a)),a.onSelect=a.onSelect.bind(Object(d.a)(a)),a.onRemove=a.onRemove.bind(Object(d.a)(a)),a.shorterVersion=a.shorterVersion.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=window.google;this.autocomplete=new e.maps.places.Autocomplete(document.getElementById("autocomplete"),{}),this.autocomplete.addListener("place_changed",this.handlePlaceSelect)}},{key:"handlePlaceSelect",value:function(){var e=this.autocomplete.getPlace().address_components.map((function(e){return e.long_name})).join(", ");this.setState({address:e})}},{key:"triggerStoreDisplay",value:function(e){this.props.history.push({pathname:"/stores/"+e.id,state:{store:e}})}},{key:"convertMinsToHrsMins",value:function(e){var t=Math.floor(e/60),a=e%60,n=!1;return 24==t?(n=!0,t-=12):t<12?n=!0:12!=t&&(t-=12),0==(t=t<10?"0"+t:t)&&(t="12"),a=a<10?"0"+a:a,n?"".concat(t,":").concat(a,"am"):"".concat(t,":").concat(a,"pm")}},{key:"shorterVersion",value:function(e){return"Spa & Wellness"==e?"Spa":"Barbershops"==e?"Barber":"Nail Salon"==e?"Nails":"Hair Salon"==e?"Hair":e}},{key:"onSelect",value:function(e,t){this.setState({selected:e,categoryError:!1})}},{key:"onRemove",value:function(e,t,a){this.setState({selected:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{fluid:!0},r.a.createElement(E.a,{className:"justify-content-center"},r.a.createElement(g.a,{xs:8,sm:7,md:6,lg:5},r.a.createElement(A.a,{initialValues:{name:"",description:"",phone:"",address:"",category:[],owner_id:"",pictureCount:this.state.selectedFiles.length},validationSchema:this.yupValidationSchema,onSubmit:function(t){var a=e.shorterVersion;if(t.category=e.state.selected.map((function(e){return a(e.name)})),0!=t.category.length){t.owner_id=JSON.parse(vt.a.get("user").substring(2)).id,t.storeHours=e.state.storeHours,t.address=e.state.address;var n=e.triggerStoreDisplay;fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/addStore",{method:"POST",headers:{"Content-type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(t)}).then((function(e){if(200===e.status)return e.json();ve.dispatch(I(e))})).then(function(){var t=Object(Be.a)(Ge.a.mark((function t(a){var r;return Ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=8;break}if(r="stores/"+a.id+"/images/",!(e.state.selectedFiles.length>0)){t.next=5;break}return t.next=5,_t(r,e.state.selectedFiles);case 5:e.props.updateRole(1),e.props.addStore(a),n(a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}else e.setState({categoryError:!0})}},(function(t){var a=t.values,n=t.errors,s=t.touched,o=t.handleChange,l=t.handleBlur,i=t.handleSubmit,c=t.setFieldValue;return r.a.createElement(k.a,{className:"formBody rounded"},r.a.createElement("h3",null,"Store Sign Up"),r.a.createElement(k.a.Group,{controlId:"formName"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.l,null))),r.a.createElement(k.a.Control,{type:"text",name:"name",value:a.name,placeholder:"Business Name",onChange:o,onBlur:l,className:s.name&&n.name?"error":null})),s.name&&n.name?r.a.createElement("div",{className:"error-message"},n.name):null),r.a.createElement(k.a.Group,{controlId:"formDescription"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.j,null))),r.a.createElement(k.a.Control,{as:"textarea",rows:3,name:"description",value:a.description,placeholder:"Description",onChange:o,onBlur:l,className:s.description&&n.description?"error":null})),s.description&&n.description?r.a.createElement("div",{className:"error-message"},n.description):null),r.a.createElement(k.a.Group,{controlId:"formPhone"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.k,null))),r.a.createElement(k.a.Control,{type:"text",value:a.phone,placeholder:"Phone Number",name:"phone",onChange:o,onBlur:l,className:s.phone&&n.phone?"error":null})),s.phone&&n.phone?r.a.createElement("div",{className:"error-message"},n.phone):null),r.a.createElement(k.a.Group,{controlId:"autocomplete"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.i,null))),r.a.createElement(k.a.Control,{type:"text",placeholder:"Address",autoComplete:"new-password",onChange:function(e){return c("address",e.target.value)},className:s.address&&n.address?"error":null})),s.address&&n.address?r.a.createElement("div",{className:"error-message"},n.address):null),r.a.createElement(k.a.Group,{controlId:"formCategory"},r.a.createElement(re.Multiselect,{options:e.state.category,onSelect:e.onSelect,onRemove:e.onRemove,placeholder:"Category",closeIcon:"cancel",displayValue:"name",avoidHighlightFirstOption:!0,style:{multiselectContainer:{width:"100%"},groupHeading:{width:50,maxWidth:50},chips:{background:"#587096",height:35},inputField:{color:"black"},searchBox:{minWidth:"100%",height:"30",backgroundColor:"white",borderRadius:"5px"}}}),e.state.categoryError?r.a.createElement("div",{className:"error-message"},"Category is required"):null),r.a.createElement("h4",null,"Store Hours"),r.a.createElement(k.a.Group,{controlId:"formHoursMonday"},r.a.createElement("h5",{className:"text-left"},"Monday"),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[0].open_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:0},e.convertMinsToHrsMins(0)),r.a.createElement("option",{value:60},e.convertMinsToHrsMins(60)),r.a.createElement("option",{value:120},e.convertMinsToHrsMins(120)),r.a.createElement("option",{value:180},e.convertMinsToHrsMins(180)),r.a.createElement("option",{value:240},e.convertMinsToHrsMins(240)),r.a.createElement("option",{value:300},e.convertMinsToHrsMins(300)),r.a.createElement("option",{value:360},e.convertMinsToHrsMins(360)),r.a.createElement("option",{value:420},e.convertMinsToHrsMins(420)),r.a.createElement("option",{value:480},e.convertMinsToHrsMins(480)),r.a.createElement("option",{value:540},e.convertMinsToHrsMins(540)),r.a.createElement("option",{value:600},e.convertMinsToHrsMins(600)),r.a.createElement("option",{value:660},e.convertMinsToHrsMins(660)),r.a.createElement("option",{value:720},e.convertMinsToHrsMins(720)),r.a.createElement("option",{value:780},e.convertMinsToHrsMins(780)),r.a.createElement("option",{value:840},e.convertMinsToHrsMins(840)))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[0].close_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:900},e.convertMinsToHrsMins(900)),r.a.createElement("option",{value:960},e.convertMinsToHrsMins(960)),r.a.createElement("option",{value:1020},e.convertMinsToHrsMins(1020)),r.a.createElement("option",{value:1080},e.convertMinsToHrsMins(1080)),r.a.createElement("option",{value:1140},e.convertMinsToHrsMins(1140)),r.a.createElement("option",{value:1200},e.convertMinsToHrsMins(1200)),r.a.createElement("option",{value:1260},e.convertMinsToHrsMins(1260)),r.a.createElement("option",{value:1320},e.convertMinsToHrsMins(1320)),r.a.createElement("option",{value:1380},e.convertMinsToHrsMins(1380)),r.a.createElement("option",{value:1440},e.convertMinsToHrsMins(1440)))))),r.a.createElement(k.a.Group,{controlId:"formHoursTuesday"},r.a.createElement("h5",{className:"text-left"},"Tuesday"),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[1].open_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:0},e.convertMinsToHrsMins(0)),r.a.createElement("option",{value:60},e.convertMinsToHrsMins(60)),r.a.createElement("option",{value:120},e.convertMinsToHrsMins(120)),r.a.createElement("option",{value:180},e.convertMinsToHrsMins(180)),r.a.createElement("option",{value:240},e.convertMinsToHrsMins(240)),r.a.createElement("option",{value:300},e.convertMinsToHrsMins(300)),r.a.createElement("option",{value:360},e.convertMinsToHrsMins(360)),r.a.createElement("option",{value:420},e.convertMinsToHrsMins(420)),r.a.createElement("option",{value:480},e.convertMinsToHrsMins(480)),r.a.createElement("option",{value:540},e.convertMinsToHrsMins(540)),r.a.createElement("option",{value:600},e.convertMinsToHrsMins(600)),r.a.createElement("option",{value:660},e.convertMinsToHrsMins(660)),r.a.createElement("option",{value:720},e.convertMinsToHrsMins(720)),r.a.createElement("option",{value:780},e.convertMinsToHrsMins(780)),r.a.createElement("option",{value:840},e.convertMinsToHrsMins(840)))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[1].close_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:900},e.convertMinsToHrsMins(900)),r.a.createElement("option",{value:960},e.convertMinsToHrsMins(960)),r.a.createElement("option",{value:1020},e.convertMinsToHrsMins(1020)),r.a.createElement("option",{value:1080},e.convertMinsToHrsMins(1080)),r.a.createElement("option",{value:1140},e.convertMinsToHrsMins(1140)),r.a.createElement("option",{value:1200},e.convertMinsToHrsMins(1200)),r.a.createElement("option",{value:1260},e.convertMinsToHrsMins(1260)),r.a.createElement("option",{value:1320},e.convertMinsToHrsMins(1320)),r.a.createElement("option",{value:1380},e.convertMinsToHrsMins(1380)),r.a.createElement("option",{value:1440},e.convertMinsToHrsMins(1440)))))),r.a.createElement(k.a.Group,{controlId:"formHoursWednesday"},r.a.createElement("h5",{className:"text-left"},"Wednesday"),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[2].open_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:0},e.convertMinsToHrsMins(0)),r.a.createElement("option",{value:60},e.convertMinsToHrsMins(60)),r.a.createElement("option",{value:120},e.convertMinsToHrsMins(120)),r.a.createElement("option",{value:180},e.convertMinsToHrsMins(180)),r.a.createElement("option",{value:240},e.convertMinsToHrsMins(240)),r.a.createElement("option",{value:300},e.convertMinsToHrsMins(300)),r.a.createElement("option",{value:360},e.convertMinsToHrsMins(360)),r.a.createElement("option",{value:420},e.convertMinsToHrsMins(420)),r.a.createElement("option",{value:480},e.convertMinsToHrsMins(480)),r.a.createElement("option",{value:540},e.convertMinsToHrsMins(540)),r.a.createElement("option",{value:600},e.convertMinsToHrsMins(600)),r.a.createElement("option",{value:660},e.convertMinsToHrsMins(660)),r.a.createElement("option",{value:720},e.convertMinsToHrsMins(720)),r.a.createElement("option",{value:780},e.convertMinsToHrsMins(780)),r.a.createElement("option",{value:840},e.convertMinsToHrsMins(840)))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[2].close_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:900},e.convertMinsToHrsMins(900)),r.a.createElement("option",{value:960},e.convertMinsToHrsMins(960)),r.a.createElement("option",{value:1020},e.convertMinsToHrsMins(1020)),r.a.createElement("option",{value:1080},e.convertMinsToHrsMins(1080)),r.a.createElement("option",{value:1140},e.convertMinsToHrsMins(1140)),r.a.createElement("option",{value:1200},e.convertMinsToHrsMins(1200)),r.a.createElement("option",{value:1260},e.convertMinsToHrsMins(1260)),r.a.createElement("option",{value:1320},e.convertMinsToHrsMins(1320)),r.a.createElement("option",{value:1380},e.convertMinsToHrsMins(1380)),r.a.createElement("option",{value:1440},e.convertMinsToHrsMins(1440)))))),r.a.createElement(k.a.Group,{controlId:"formHoursThursday"},r.a.createElement("h5",{className:"text-left"},"Thursday"),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[3].open_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:0},e.convertMinsToHrsMins(0)),r.a.createElement("option",{value:60},e.convertMinsToHrsMins(60)),r.a.createElement("option",{value:120},e.convertMinsToHrsMins(120)),r.a.createElement("option",{value:180},e.convertMinsToHrsMins(180)),r.a.createElement("option",{value:240},e.convertMinsToHrsMins(240)),r.a.createElement("option",{value:300},e.convertMinsToHrsMins(300)),r.a.createElement("option",{value:360},e.convertMinsToHrsMins(360)),r.a.createElement("option",{value:420},e.convertMinsToHrsMins(420)),r.a.createElement("option",{value:480},e.convertMinsToHrsMins(480)),r.a.createElement("option",{value:540},e.convertMinsToHrsMins(540)),r.a.createElement("option",{value:600},e.convertMinsToHrsMins(600)),r.a.createElement("option",{value:660},e.convertMinsToHrsMins(660)),r.a.createElement("option",{value:720},e.convertMinsToHrsMins(720)),r.a.createElement("option",{value:780},e.convertMinsToHrsMins(780)),r.a.createElement("option",{value:840},e.convertMinsToHrsMins(840)))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[3].close_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:900},e.convertMinsToHrsMins(900)),r.a.createElement("option",{value:960},e.convertMinsToHrsMins(960)),r.a.createElement("option",{value:1020},e.convertMinsToHrsMins(1020)),r.a.createElement("option",{value:1080},e.convertMinsToHrsMins(1080)),r.a.createElement("option",{value:1140},e.convertMinsToHrsMins(1140)),r.a.createElement("option",{value:1200},e.convertMinsToHrsMins(1200)),r.a.createElement("option",{value:1260},e.convertMinsToHrsMins(1260)),r.a.createElement("option",{value:1320},e.convertMinsToHrsMins(1320)),r.a.createElement("option",{value:1380},e.convertMinsToHrsMins(1380)),r.a.createElement("option",{value:1440},e.convertMinsToHrsMins(1440)))))),r.a.createElement(k.a.Group,{controlId:"formHoursFriday"},r.a.createElement("h5",{className:"text-left"},"Friday"),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[4].open_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:0},e.convertMinsToHrsMins(0)),r.a.createElement("option",{value:60},e.convertMinsToHrsMins(60)),r.a.createElement("option",{value:120},e.convertMinsToHrsMins(120)),r.a.createElement("option",{value:180},e.convertMinsToHrsMins(180)),r.a.createElement("option",{value:240},e.convertMinsToHrsMins(240)),r.a.createElement("option",{value:300},e.convertMinsToHrsMins(300)),r.a.createElement("option",{value:360},e.convertMinsToHrsMins(360)),r.a.createElement("option",{value:420},e.convertMinsToHrsMins(420)),r.a.createElement("option",{value:480},e.convertMinsToHrsMins(480)),r.a.createElement("option",{value:540},e.convertMinsToHrsMins(540)),r.a.createElement("option",{value:600},e.convertMinsToHrsMins(600)),r.a.createElement("option",{value:660},e.convertMinsToHrsMins(660)),r.a.createElement("option",{value:720},e.convertMinsToHrsMins(720)),r.a.createElement("option",{value:780},e.convertMinsToHrsMins(780)),r.a.createElement("option",{value:840},e.convertMinsToHrsMins(840)))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[4].close_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:900},e.convertMinsToHrsMins(900)),r.a.createElement("option",{value:960},e.convertMinsToHrsMins(960)),r.a.createElement("option",{value:1020},e.convertMinsToHrsMins(1020)),r.a.createElement("option",{value:1080},e.convertMinsToHrsMins(1080)),r.a.createElement("option",{value:1140},e.convertMinsToHrsMins(1140)),r.a.createElement("option",{value:1200},e.convertMinsToHrsMins(1200)),r.a.createElement("option",{value:1260},e.convertMinsToHrsMins(1260)),r.a.createElement("option",{value:1320},e.convertMinsToHrsMins(1320)),r.a.createElement("option",{value:1380},e.convertMinsToHrsMins(1380)),r.a.createElement("option",{value:1440},e.convertMinsToHrsMins(1440)))))),r.a.createElement(k.a.Group,{controlId:"formHoursSaturday"},r.a.createElement("h5",{className:"text-left"},"Saturday"),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[5].open_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:0},e.convertMinsToHrsMins(0)),r.a.createElement("option",{value:60},e.convertMinsToHrsMins(60)),r.a.createElement("option",{value:120},e.convertMinsToHrsMins(120)),r.a.createElement("option",{value:180},e.convertMinsToHrsMins(180)),r.a.createElement("option",{value:240},e.convertMinsToHrsMins(240)),r.a.createElement("option",{value:300},e.convertMinsToHrsMins(300)),r.a.createElement("option",{value:360},e.convertMinsToHrsMins(360)),r.a.createElement("option",{value:420},e.convertMinsToHrsMins(420)),r.a.createElement("option",{value:480},e.convertMinsToHrsMins(480)),r.a.createElement("option",{value:540},e.convertMinsToHrsMins(540)),r.a.createElement("option",{value:600},e.convertMinsToHrsMins(600)),r.a.createElement("option",{value:660},e.convertMinsToHrsMins(660)),r.a.createElement("option",{value:720},e.convertMinsToHrsMins(720)),r.a.createElement("option",{value:780},e.convertMinsToHrsMins(780)),r.a.createElement("option",{value:840},e.convertMinsToHrsMins(840)))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[5].close_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:900},e.convertMinsToHrsMins(900)),r.a.createElement("option",{value:960},e.convertMinsToHrsMins(960)),r.a.createElement("option",{value:1020},e.convertMinsToHrsMins(1020)),r.a.createElement("option",{value:1080},e.convertMinsToHrsMins(1080)),r.a.createElement("option",{value:1140},e.convertMinsToHrsMins(1140)),r.a.createElement("option",{value:1200},e.convertMinsToHrsMins(1200)),r.a.createElement("option",{value:1260},e.convertMinsToHrsMins(1260)),r.a.createElement("option",{value:1320},e.convertMinsToHrsMins(1320)),r.a.createElement("option",{value:1380},e.convertMinsToHrsMins(1380)),r.a.createElement("option",{value:1440},e.convertMinsToHrsMins(1440)))))),r.a.createElement(k.a.Group,{controlId:"formHoursSunday"},r.a.createElement("h5",{className:"text-left"},"Sunday"),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[6].open_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:0},e.convertMinsToHrsMins(0)),r.a.createElement("option",{value:60},e.convertMinsToHrsMins(60)),r.a.createElement("option",{value:120},e.convertMinsToHrsMins(120)),r.a.createElement("option",{value:180},e.convertMinsToHrsMins(180)),r.a.createElement("option",{value:240},e.convertMinsToHrsMins(240)),r.a.createElement("option",{value:300},e.convertMinsToHrsMins(300)),r.a.createElement("option",{value:360},e.convertMinsToHrsMins(360)),r.a.createElement("option",{value:420},e.convertMinsToHrsMins(420)),r.a.createElement("option",{value:480},e.convertMinsToHrsMins(480)),r.a.createElement("option",{value:540},e.convertMinsToHrsMins(540)),r.a.createElement("option",{value:600},e.convertMinsToHrsMins(600)),r.a.createElement("option",{value:660},e.convertMinsToHrsMins(660)),r.a.createElement("option",{value:720},e.convertMinsToHrsMins(720)),r.a.createElement("option",{value:780},e.convertMinsToHrsMins(780)),r.a.createElement("option",{value:840},e.convertMinsToHrsMins(840)))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[6].close_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:900},e.convertMinsToHrsMins(900)),r.a.createElement("option",{value:960},e.convertMinsToHrsMins(960)),r.a.createElement("option",{value:1020},e.convertMinsToHrsMins(1020)),r.a.createElement("option",{value:1080},e.convertMinsToHrsMins(1080)),r.a.createElement("option",{value:1140},e.convertMinsToHrsMins(1140)),r.a.createElement("option",{value:1200},e.convertMinsToHrsMins(1200)),r.a.createElement("option",{value:1260},e.convertMinsToHrsMins(1260)),r.a.createElement("option",{value:1320},e.convertMinsToHrsMins(1320)),r.a.createElement("option",{value:1380},e.convertMinsToHrsMins(1380)),r.a.createElement("option",{value:1440},e.convertMinsToHrsMins(1440)))))),r.a.createElement(k.a.Group,{controlId:"formPictureCount"},r.a.createElement("input",{onChange:function(t){return e.fileChangedHandler(t,c)},type:"file",multiple:!0,className:s.pictureCount&&n.pictureCount?"error":null}),s.pictureCount&&n.pictureCount?r.a.createElement("div",{className:"error-message"},n.pictures):null),s.pictureCount&&n.pictureCount?r.a.createElement("div",{className:"error-message"},n.pictureCount):null,r.a.createElement(M.a,{onClick:i},"Submit"))})))))}}]),t}(r.a.Component),It=Object(x.b)(null,(function(e){return Object(O.b)({updateRole:function(e){return function(e){return{type:"UPDATE_ROLE",role:e}}(e)},addStore:function(e){return function(e){return{type:"ADD_STORE",store:e}}(e)}},e)}))(Nt),Dt=a(170),Wt=a(9),Rt=(a(401),a(49)),Pt=a(48),Gt=(a(403),a(458)),Bt=(a(463),a(467),new Date),Lt=function(e){return 0===e.getDay()||6===e.getDay()},At=function(e){var t=e.startDate,a=(e.classes,Object(Wt.a)(e,["startDate","classes"]));return r.a.createElement(Rt.h.DayScaleCell,Object.assign({className:Lt(t)?"weekend":null,startDate:t},a))},Ft=function(e){var t=e.startDate,a=(e.classes,Object(Wt.a)(e,["startDate","classes"]));return r.a.createElement(Rt.h.TimeTableCell,Object.assign({className:Lt(t)?"weekend":null,startDate:t},a))},qt=function(e){var t=e.appointmentData,a=e.onFieldChange,n=Object(Wt.a)(e,["appointmentData","onFieldChange"]);return r.a.createElement(Rt.a.BasicLayout,Object.assign({onFieldChange:a,appointmentData:t},n),r.a.createElement(Rt.a.Label,{text:"Price",type:"title"}),r.a.createElement(E.a,{className:"justify-content-center"},r.a.createElement(Rt.a.TextEditor,{style:{width:"50%"},value:t.price,onValueChange:function(e){a({price:e})},placeholder:"Price"}),r.a.createElement(Rt.a.Label,{style:{marginTop:15,marginLeft:10,fontSize:20},text:"$",type:"text"})))},Ut={allDayLabel:"",repeatLabel:""},Vt=function(e){Object.assign({},e);return null},zt=function(e){var t=e.appointmentData,a=(e.visible,Object(Wt.a)(e,["appointmentData","visible"]));return r.a.createElement(Rt.a.RecurrenceLayout,Object.assign({appointmentData:t,visible:!1},a))},Jt=function(e){var t=e.children,a=e.style,n=Object(Wt.a)(e,["children","style"]);return r.a.createElement(Rt.c.Appointment,Object.assign({},n,{style:Object(Dt.a)({},a,{backgroundColor:"#597096",borderRadius:"5px"})}),t)},Yt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).getAppointments=function(){fetch("fetchDomain/stores/"+a.props.match.params.store_id+"/appointments",{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){var t=[];e.map((function(e,n){var r=new Date(e.date),s=new Date(r.getFullYear(),r.getMonth(),r.getDate(),e.start_time,0),o=new Date(r.getFullYear(),r.getMonth(),r.getDate(),e.end_time,0);console.log(s),t.push({id:n,title:e.title,workers:[a.state.worker_map[e.worker_id]],services:[a.state.service_map[e.service_id]],price:e.price,startDate:s,endDate:o}),a.setState({appointments:t,selectedAppointments:t})}))}))},a.state={services:[],workers:[],worker_map:{},service_map:{},selectedWorkers:[],selectedServices:[],selectedAppointments:[],appointments:[],mainResourceName:"workers",resources:[{fieldName:"services",title:"Services",allowMultiple:!0,instances:[]},{fieldName:"workers",title:"Workers",allowMultiple:!0,instances:[]}],currentDate:Bt.getFullYear()+"-"+(Bt.getMonth()+1)+"-"+Bt.getDate()},a.commitChanges=a.commitChanges.bind(Object(d.a)(a)),a.changeMainResource=a.changeMainResource.bind(Object(d.a)(a)),a.onSelectWorker=a.onSelectWorker.bind(Object(d.a)(a)),a.onRemoveWorker=a.onRemoveWorker.bind(Object(d.a)(a)),a.onSelectService=a.onSelectService.bind(Object(d.a)(a)),a.onRemoveService=a.onRemoveService.bind(Object(d.a)(a)),a.onSearch=a.onSearch.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(Be.a)(Ge.a.mark((function e(){var t,a,n,r,s,o,l,i,c,u=this;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.match.params.store_id,a=[],n=[],r=[],s=[],!this.props.location.state||!this.props.location.state.services){e.next=12;break}o={},l=[],this.props.location.state.services.map((function(e,t){l.push({id:t,text:e.name}),o[e.id]=e.name})),this.setState({services:this.props.location.state.store.services,service_map:o}),e.next=14;break;case 12:return e.next=14,fetch("fetchDomain/stores/"+t+"/services",{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){if(200===e.status)return e.json();console.log("error")})).then(function(){var e=Object(Be.a)(Ge.a.mark((function e(t){var a,r;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(n=t,a=[],r={},console.log("here!!",n),n.map((function(e,t){a.push({id:t,text:e.name}),r[e.id]=e.name})),u.setState({services:n,service_map:r}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:if(!this.props.location.state||!this.props.location.state.workers){e.next=21;break}i=[],c={},this.props.location.state.workers.map((function(e,t){i.push({id:t,text:e.first_name+" "+e.last_name}),c[e.id]=e.first_name+" "+e.last_name})),this.setState({workers:i,worker_map:c}),e.next=23;break;case 21:return e.next=23,fetch("fetchDomain/stores/"+t+"/workers_list",{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){if(200===e.status)return e.json();console.log("error")})).then(function(){var e=Object(Be.a)(Ge.a.mark((function e(t){var n,r;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(a=t,console.log("here",a),n=[],r={},a.map((function(e,t){n.push({id:t,text:e.first_name+" "+e.last_name}),r[e.id]=e.first_name+" "+e.last_name})),u.setState({workers:n,worker_map:r}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 23:(s=this.state.resources[0]).instances=this.state.services,(r=this.state.resources[1]).instances=this.state.workers,this.setState({resources:[s,r]}),this.getAppointments();case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changeMainResource",value:function(e){this.setState({mainResourceName:e})}},{key:"onSelectWorker",value:function(e,t){this.setState({selectedWorkers:e})}},{key:"onRemoveWorker",value:function(e,t){this.setState({selectedWorkers:e})}},{key:"onSelectService",value:function(e,t){this.setState({selectedServices:e})}},{key:"onRemoveService",value:function(e,t){this.setState({selectedServices:e})}},{key:"onSearch",value:function(){var e,t,a=this,n=[];this.state.appointments.map((function(r){e=0==a.state.selectedWorkers.length,t=0==a.state.selectedServices.length,a.state.selectedWorkers.map((function(t){r.workers.includes(t.id)&&(e=!0)})),a.state.selectedServices.map((function(e){r.services.includes(e.id)&&(t=!0)})),t&&e&&n.push(r)})),this.setState({selectedAppointments:n})}},{key:"commitChanges",value:function(e){var t=e.added,a=e.changed,n=e.deleted;this.setState((function(e){var r=e.selectedAppointments;if(t){var s=r.length>0?r[r.length-1].id+1:0;r=[].concat(Object(at.a)(r),[Object(Dt.a)({id:s},t)])}return a&&(r=r.map((function(e){return a[e.id]?Object(Dt.a)({},e,{},a[e.id]):e}))),void 0!==n&&(r=r.filter((function(e){return e.id!==n}))),{appointments:r}}))}},{key:"render",value:function(){return console.log(this.state.selectedAppointments),r.a.createElement(v.a,{fluid:!0},r.a.createElement(E.a,{className:"justify-content-center"},r.a.createElement(g.a,null,r.a.createElement("p",{className:"title"}," Manage Your Appointments "),r.a.createElement(E.a,{style:{marginBottom:50,marginLeft:"22%",position:"relative"}},r.a.createElement(re.Multiselect,{options:this.state.resources[0].instances,onSelect:this.onSelectService,onRemove:this.onRemoveService,placeholder:"Service",closeIcon:"cancel",displayValue:"text",style:{multiselectContainer:{marginLeft:"2%",width:"35%"},groupHeading:{width:50,maxWidth:50},chips:{background:"#587096",height:35},inputField:{color:"black"},searchBox:{minWidth:250,width:"100%",height:"30",backgroundColor:"white",borderRadius:"5px"}}}),r.a.createElement(re.Multiselect,{options:this.state.resources[1].instances,onSelect:this.onSelectWorker,onRemove:this.onRemoveWorker,placeholder:"Workers",closeIcon:"cancel",displayValue:"text",style:{multiselectContainer:{marginLeft:"2%",width:"35%"},optionContainer:{zIndex:1e7},chips:{background:"#587096",height:35},inputField:{color:"black"},searchBox:{minWidth:250,width:"100%",height:"30",backgroundColor:"white",borderRadius:"5px"}}}),r.a.createElement(Z.a,{onClick:this.onSearch,size:35,style:{cursor:"pointer",marginLeft:10,paddingRight:"10px"}})),r.a.createElement(Gt.a,{className:"react-calendar"},r.a.createElement(Rt.j,{data:this.state.selectedAppointments},r.a.createElement(Pt.s,{defaultCurrentDate:this.state.currentDate}),r.a.createElement(Pt.k,{onCommitChanges:this.commitChanges}),r.a.createElement(Pt.m,null),r.a.createElement(Rt.n,{startDayHour:8,endDayHour:24,cellDuration:60}),r.a.createElement(Rt.h,{dayScaleCellComponent:At,timeTableCellComponent:Ft}),r.a.createElement(Rt.f,{startDayHour:8,endDayHour:24,cellDuration:60}),r.a.createElement(Rt.l,null),r.a.createElement(Rt.m,null),r.a.createElement(Rt.e,null),r.a.createElement(Rt.k,null),r.a.createElement(Rt.d,null),r.a.createElement(Rt.c,{appointmentComponent:Jt}),r.a.createElement(Rt.b,{showCloseButton:!0,showOpenButton:!0}),r.a.createElement(Rt.a,{isRecurrence:!1,basicLayoutComponent:qt,recurrenceLayoutComponent:zt,messages:Ut,booleanEditorComponent:Vt}),r.a.createElement(Rt.i,{data:this.state.resources}),r.a.createElement(Rt.g,null))))))}}]),t}(r.a.Component),$t=Object(i.h)(Yt),Zt=(a(404),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={store:{id:"",name:"",address:"",created_at:"",category:[],services:[],workers:[],owners:[],phone:"",clients:[],pictures:[],description:"",lat:"",lng:""},pictures:[]},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"triggerStoreEdit",value:function(){this.props.history.push({pathname:"/stores/edit/"+this.props.match.params.store_id,state:this.state})}},{key:"triggerBook",value:function(){this.props.history.push({pathname:"/book/"+this.props.match.params.store_id,state:this.state})}},{key:"componentDidMount",value:function(){var e=Object(Be.a)(Ge.a.mark((function e(){var t,a,n,r=this;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St("stores/"+this.props.match.params.store_id+"/images/");case 2:0==(t=e.sent).length&&(t=[{url:"/hair.jpg",key:"/hair.jpg"},{url:"/nails.jpg",key:"/nails.jpg"},{url:"/salon.jpg",key:"/salon.jpg"}]),this.props.location.state&&this.props.location.state.store?(a=this.props.location.state.store.category.map((function(e){return{value:e.toLowerCase(),label:e}})),(n=this.props.location.state.store).pictures=t,this.setState({store:n,selectedOption:a})):fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/stores/"+this.props.match.params.store_id,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){if(200===e.status)return e.json();ve.dispatch(I(e))})).then((function(e){if(e){var a=e.category.map((function(e){return{value:e.toLowerCase(),label:e}}));e.pictures=t,r.setState({store:e,selectedOption:a})}}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;return vt.a.get("user")&&this.state.store.owners.indexOf(JSON.parse(vt.a.get("user").substring(2)).id)>-1&&(e=r.a.createElement(M.a,{className:"float-left",onClick:function(){return t.triggerStoreEdit()}},"Edit Store")),r.a.createElement(v.a,{fluid:!0},r.a.createElement(E.a,{className:"justify-content-md-center",style:{marginTop:"15px",marginBottom:"15px"}},r.a.createElement(g.a,{lg:3},r.a.createElement("h1",null,this.state.store.name),r.a.createElement("h5",{style:{color:"gray"}},this.state.store.address),r.a.createElement("hr",null),r.a.createElement("p",{style:{fontSize:"25px"}},this.state.store.description),r.a.createElement("ul",null,this.state.store.category.map((function(e,t){return r.a.createElement("li",{key:"cat-"+t},e)}))),r.a.createElement("div",{id:"buttonGroup"},e,r.a.createElement(M.a,{className:"float-left",onClick:function(){return t.triggerBook()}},"Book Now"))),r.a.createElement(g.a,{xs:10,sm:9,md:8,lg:7},r.a.createElement(Je,{className:"carousel",pictures:this.state.store.pictures}))),r.a.createElement(E.a,null),r.a.createElement(E.a,null))}}]),t}(r.a.Component)),Kt=Object(i.h)(Zt);function Xt(){var e=Object(nt.a)(["\n  display: block;\n  margin: 0 auto;\n"]);return Xt=function(){return e},e}var Qt="http://bloom-490-dev.us-east-1.elasticbeanstalk.com",ea=(Object(ut.css)(Xt()),a(135)),ta=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleSelectChange=function(e){var t=["formHoursMonday","formHoursTuesday","formHoursWednesday","formHoursThursday","formHoursFriday","formHoursSaturday","formHoursSunday"].indexOf(e.target.id),n=a.state.newHours,r=0,s=0,o=[];a.state.newHours[t]?(r=a.state.newHours[t].open_time,s=a.state.newHours[t].close_time):(r=a.state.storeHours[t].open_time,s=a.state.storeHours[t].close_time),parseInt(e.target.querySelector("option").value)<=840?(n[t]={open_time:parseInt(e.target.value),close_time:s},o=[].concat(Object(at.a)(a.state.storeHours.slice(0,t)),[{open_time:parseInt(e.target.value),close_time:s}],Object(at.a)(a.state.storeHours.slice(t+1)))):(n[t]={open_time:r,close_time:parseInt(e.target.value)},o=[].concat(Object(at.a)(a.state.storeHours.slice(0,t)),[{open_time:r,close_time:parseInt(e.target.value)}],Object(at.a)(a.state.storeHours.slice(t+1)))),a.setState({newHours:n,storeHours:o})},a.deleteFileChangeHandler=function(){var e=Object(Be.a)(Ge.a.mark((function e(t,n,r){return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.checked){e.next=6;break}return e.next=3,a.state.keys.push(t.target.id);case 3:n("pictureCount",a.state.pictures.length+r-a.state.keys.length),e.next=9;break;case 6:return e.next=8,a.state.keys.pop(t.target.id);case 8:n("pictureCount",a.state.pictures.length+r-a.state.keys.length);case 9:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),a.fileChangedHandler=function(){var e=Object(Be.a)(Ge.a.mark((function e(t,n,r){return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({selectedFiles:t.target.files}),n("pictureCount",a.state.pictures.length+t.target.files.length-a.state.keys.length),n("pictures",t.target.files);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),a.state={store:{name:"",description:"",phone:"",id:"",address:"",category:[]},address:"",storeHours:[{open_time:540,close_time:1020},{open_time:540,close_time:1020},{open_time:540,close_time:1020},{open_time:540,close_time:1020},{open_time:540,close_time:1020},{open_time:540,close_time:1020},{open_time:540,close_time:1020}],newHours:[],loading:!0,pictures:[],selectedFiles:[],keys:[],category:ea.getCategories(),categoryError:!1,selected:[]},a.phoneRegExp=/^(\+?\d{0,4})?\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{4}\)?)?$/,a.yupValidationSchema=F.c().shape({name:F.e().min(2,"Store name must have at least 2 characters").max(100,"Store name can't be longer than 100 characters").required("Name is required"),description:F.e().min(20,"Description must have at least 20 characters").required("Description is required"),phone:F.e().matches(a.phoneRegExp,"Phone number is not valid").required("Phone number is required"),address:F.e().required("Address is required"),category:F.a().required("Category is required").nullable(),pictureCount:F.b().required("Pictures are required").min(1,"Must have at least one picture")}),a.autocomplete=null,a.handlePlaceSelect=a.handlePlaceSelect.bind(Object(d.a)(a)),a.triggerStoreDisplay=a.triggerStoreDisplay.bind(Object(d.a)(a)),a.onSelect=a.onSelect.bind(Object(d.a)(a)),a.onRemove=a.onRemove.bind(Object(d.a)(a)),a.shorterVersion=a.shorterVersion.bind(Object(d.a)(a)),a.longerVersion=a.longerVersion.bind(Object(d.a)(a)),a.triggerStoreDisplayNoResp=a.triggerStoreDisplayNoResp.bind(Object(d.a)(a)),a.autocompleteChange=a.autocompleteChange.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"onSelect",value:function(e,t){this.setState({selected:e,categoryError:!1})}},{key:"onRemove",value:function(e,t,a){this.setState({selected:e})}},{key:"autocompleteChange",value:function(e,t){t("address",e.target.value),this.setState({address:e.target.value})}},{key:"handlePlaceSelect",value:function(){var e=this.autocomplete.getPlace().address_components.map((function(e){return e.long_name})).join(", ");this.setState({address:e})}},{key:"triggerStoreDisplay",value:function(e){this.props.history.push({pathname:"/stores/"+this.props.match.params.store_id,state:{store:e}})}},{key:"triggerStoreDisplayNoResp",value:function(){this.props.history.push({pathname:"/stores/"+this.props.match.params.store_id})}},{key:"convertMinsToHrsMins",value:function(e){var t=Math.floor(e/60),a=e%60,n=!1;return 24==t?(n=!0,t-=12):t<12?n=!0:12!=t&&(t-=12),0==(t=t<10?"0"+t:t)&&(t="12"),a=a<10?"0"+a:a,n?"".concat(t,":").concat(a,"am"):"".concat(t,":").concat(a,"pm")}},{key:"shorterVersion",value:function(e){return"Spa & Wellness"==e?"Spa":"Barbershops"==e?"Barber":"Nail Salon"==e?"Nails":"Hair Salon"==e?"Hair":e}},{key:"longerVersion",value:function(e){return"Spa"==e?"Spa & Wellness":"Barber"==e?"Barbershops":"Nails"==e?"Nail Salon":"Hair"==e?"Hair Salon":e}},{key:"componentDidMount",value:function(){var e=Object(Be.a)(Ge.a.mark((function e(){var t,a,n,r=this;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St("stores/"+this.props.match.params.store_id+"/images/");case 2:t=e.sent,this.props.location.state&&this.props.location.state.store?(a=this.props.location.state.store.category.map((function(e,t){return{id:t,name:r.longerVersion(e)}})),fetch(Qt+"/stores/"+this.props.match.params.store_id+"/storeHours",{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){if(200===e.status)return e.json();ve.dispatch(I(e))})).then((function(e){r.setState({store:r.props.location.state.store,selected:a,address:r.props.location.state.store.address,storeHours:e,loading:!1,pictures:t})}))):Promise.all([fetch(Qt+"/stores/"+this.props.match.params.store_id,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){return e.json()})),fetch(Qt+"/stores/"+this.props.match.params.store_id+"/storeHours",{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){return e.json()}))]).then((function(e){var a=e[0],n=e[1],s=a.category.map((function(e,t){return{id:t,name:r.longerVersion(e)}}));r.setState({store:a,selected:s,address:a.address,storeHours:n,loading:!1,pictures:t})})),n=window.google,this.autocomplete=new n.maps.places.Autocomplete(document.getElementById("autocomplete"),{}),this.autocomplete.addListener("place_changed",this.handlePlaceSelect);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(E.a,{className:"justify-content-center",id:"test"},r.a.createElement(g.a,{xs:8,sm:7,md:6,lg:5},r.a.createElement(A.a,{enableReinitialize:!0,initialValues:{name:this.state.store.name,description:this.state.store.description,phone:this.state.store.phone,address:this.state.store.address,category:this.state.selected,services:null,owners:null,pictures:[],pictureCount:this.state.pictures.length-this.state.keys.length,storeHours:this.state.storeHours},validationSchema:this.yupValidationSchema,onSubmit:function(){var t=Object(Be.a)(Ge.a.mark((function t(a){var n,r,s,o;return Ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.shorterVersion,a.category=e.state.selected.map((function(e){return n(e.name)})),0!=a.category.length){t.next=5;break}return e.setState({categoryError:!0}),t.abrupt("return");case 5:if(r=e.props.match.params.store_id,s=e.triggerStoreDisplay,e.triggerStoreDisplayNoResp,a.services=e.state.store.services,a.owners=e.state.store.owners,a.id=r,a.storeHours=e.state.newHours,a.address=e.state.address,!(e.state.keys.length>0)){t.next=16;break}return t.next=16,jt(e.state.keys);case 16:if(!(e.state.selectedFiles.length>0)){t.next=20;break}return o="stores/"+e.props.match.params.store_id+"/images/",t.next=20,_t(o,e.state.selectedFiles);case 20:fetch(Qt+"/stores/edit/"+r,{method:"POST",headers:{"Content-type":"application/json"},credentials:"include",body:JSON.stringify(a)}).then((function(e){if(200===e.status)return e.json();ve.dispatch(I(e))})).then((function(e){e?s(e):console.log("should not be here, but going to redirect until this is fixed")}));case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},(function(t){var a=t.values,n=t.errors,s=t.touched,o=t.handleChange,l=t.handleBlur,i=t.handleSubmit,c=t.setFieldValue;return r.a.createElement(k.a,{className:"formBody rounded"},r.a.createElement("h3",null,"Store Edit"),r.a.createElement(k.a.Group,{controlId:"formName"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.l,null))),r.a.createElement(k.a.Control,{type:"text",name:"name",value:a.name,placeholder:"Business Name",onChange:o,onBlur:l,className:s.name&&n.name?"error":null})),s.name&&n.name?r.a.createElement("div",{className:"error-message"},n.name):null),r.a.createElement(k.a.Group,{controlId:"formDescription"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.j,null))),r.a.createElement(k.a.Control,{as:"textarea",rows:3,name:"description",value:a.description,placeholder:"Description",onChange:o,onBlur:l,className:s.description&&n.description?"error":null})),s.description&&n.description?r.a.createElement("div",{className:"error-message"},n.description):null),r.a.createElement(k.a.Group,{controlId:"formPhone"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.k,null))),r.a.createElement(k.a.Control,{type:"text",value:a.phone,placeholder:"Phone Number",name:"phone",onChange:o,onBlur:l,className:s.phone&&n.phone?"error":null})),s.phone&&n.phone?r.a.createElement("div",{className:"error-message"},n.phone):null),r.a.createElement(k.a.Group,{controlId:"autocomplete"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.i,null))),r.a.createElement(k.a.Control,{type:"text",placeholder:"Address",autoComplete:"new-password",onChange:function(t){return e.autocompleteChange(t,c)},className:s.address&&n.address?"error":null,value:e.state.address})),s.address&&n.address?r.a.createElement("div",{className:"error-message"},n.address):null),r.a.createElement(k.a.Group,{controlId:"category"},r.a.createElement(re.Multiselect,{selectedValues:e.state.selected,options:e.state.category,onSelect:e.onSelect,onRemove:e.onRemove,placeholder:"Category",closeIcon:"cancel",displayValue:"name",avoidHighlightFirstOption:!0,style:{multiselectContainer:{width:"100%"},groupHeading:{width:50,maxWidth:50},chips:{background:"#587096",height:35},inputField:{color:"black"},searchBox:{minWidth:"100%",height:"30",backgroundColor:"white",borderRadius:"5px"}}}),e.state.categoryError?r.a.createElement("div",{className:"error-message"},"Category is required"):null),r.a.createElement("h4",null,"Store Hours"),r.a.createElement(k.a.Group,{controlId:"formHoursMonday"},r.a.createElement("h5",{className:"text-left"},"Monday"),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[0].open_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:0},e.convertMinsToHrsMins(0)),r.a.createElement("option",{value:60},e.convertMinsToHrsMins(60)),r.a.createElement("option",{value:120},e.convertMinsToHrsMins(120)),r.a.createElement("option",{value:180},e.convertMinsToHrsMins(180)),r.a.createElement("option",{value:240},e.convertMinsToHrsMins(240)),r.a.createElement("option",{value:300},e.convertMinsToHrsMins(300)),r.a.createElement("option",{value:360},e.convertMinsToHrsMins(360)),r.a.createElement("option",{value:420},e.convertMinsToHrsMins(420)),r.a.createElement("option",{value:480},e.convertMinsToHrsMins(480)),r.a.createElement("option",{value:540},e.convertMinsToHrsMins(540)),r.a.createElement("option",{value:600},e.convertMinsToHrsMins(600)),r.a.createElement("option",{value:660},e.convertMinsToHrsMins(660)),r.a.createElement("option",{value:720},e.convertMinsToHrsMins(720)),r.a.createElement("option",{value:780},e.convertMinsToHrsMins(780)),r.a.createElement("option",{value:840},e.convertMinsToHrsMins(840)))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[0].close_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:900},e.convertMinsToHrsMins(900)),r.a.createElement("option",{value:960},e.convertMinsToHrsMins(960)),r.a.createElement("option",{value:1020},e.convertMinsToHrsMins(1020)),r.a.createElement("option",{value:1080},e.convertMinsToHrsMins(1080)),r.a.createElement("option",{value:1140},e.convertMinsToHrsMins(1140)),r.a.createElement("option",{value:1200},e.convertMinsToHrsMins(1200)),r.a.createElement("option",{value:1260},e.convertMinsToHrsMins(1260)),r.a.createElement("option",{value:1320},e.convertMinsToHrsMins(1320)),r.a.createElement("option",{value:1380},e.convertMinsToHrsMins(1380)),r.a.createElement("option",{value:1440},e.convertMinsToHrsMins(1440)))))),r.a.createElement(k.a.Group,{controlId:"formHoursTuesday"},r.a.createElement("h5",{className:"text-left"},"Tuesday"),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[1].open_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:0},e.convertMinsToHrsMins(0)),r.a.createElement("option",{value:60},e.convertMinsToHrsMins(60)),r.a.createElement("option",{value:120},e.convertMinsToHrsMins(120)),r.a.createElement("option",{value:180},e.convertMinsToHrsMins(180)),r.a.createElement("option",{value:240},e.convertMinsToHrsMins(240)),r.a.createElement("option",{value:300},e.convertMinsToHrsMins(300)),r.a.createElement("option",{value:360},e.convertMinsToHrsMins(360)),r.a.createElement("option",{value:420},e.convertMinsToHrsMins(420)),r.a.createElement("option",{value:480},e.convertMinsToHrsMins(480)),r.a.createElement("option",{value:540},e.convertMinsToHrsMins(540)),r.a.createElement("option",{value:600},e.convertMinsToHrsMins(600)),r.a.createElement("option",{value:660},e.convertMinsToHrsMins(660)),r.a.createElement("option",{value:720},e.convertMinsToHrsMins(720)),r.a.createElement("option",{value:780},e.convertMinsToHrsMins(780)),r.a.createElement("option",{value:840},e.convertMinsToHrsMins(840)))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[1].close_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:900},e.convertMinsToHrsMins(900)),r.a.createElement("option",{value:960},e.convertMinsToHrsMins(960)),r.a.createElement("option",{value:1020},e.convertMinsToHrsMins(1020)),r.a.createElement("option",{value:1080},e.convertMinsToHrsMins(1080)),r.a.createElement("option",{value:1140},e.convertMinsToHrsMins(1140)),r.a.createElement("option",{value:1200},e.convertMinsToHrsMins(1200)),r.a.createElement("option",{value:1260},e.convertMinsToHrsMins(1260)),r.a.createElement("option",{value:1320},e.convertMinsToHrsMins(1320)),r.a.createElement("option",{value:1380},e.convertMinsToHrsMins(1380)),r.a.createElement("option",{value:1440},e.convertMinsToHrsMins(1440)))))),r.a.createElement(k.a.Group,{controlId:"formHoursWednesday"},r.a.createElement("h5",{className:"text-left"},"Wednesday"),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[2].open_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:0},e.convertMinsToHrsMins(0)),r.a.createElement("option",{value:60},e.convertMinsToHrsMins(60)),r.a.createElement("option",{value:120},e.convertMinsToHrsMins(120)),r.a.createElement("option",{value:180},e.convertMinsToHrsMins(180)),r.a.createElement("option",{value:240},e.convertMinsToHrsMins(240)),r.a.createElement("option",{value:300},e.convertMinsToHrsMins(300)),r.a.createElement("option",{value:360},e.convertMinsToHrsMins(360)),r.a.createElement("option",{value:420},e.convertMinsToHrsMins(420)),r.a.createElement("option",{value:480},e.convertMinsToHrsMins(480)),r.a.createElement("option",{value:540},e.convertMinsToHrsMins(540)),r.a.createElement("option",{value:600},e.convertMinsToHrsMins(600)),r.a.createElement("option",{value:660},e.convertMinsToHrsMins(660)),r.a.createElement("option",{value:720},e.convertMinsToHrsMins(720)),r.a.createElement("option",{value:780},e.convertMinsToHrsMins(780)),r.a.createElement("option",{value:840},e.convertMinsToHrsMins(840)))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[2].close_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:900},e.convertMinsToHrsMins(900)),r.a.createElement("option",{value:960},e.convertMinsToHrsMins(960)),r.a.createElement("option",{value:1020},e.convertMinsToHrsMins(1020)),r.a.createElement("option",{value:1080},e.convertMinsToHrsMins(1080)),r.a.createElement("option",{value:1140},e.convertMinsToHrsMins(1140)),r.a.createElement("option",{value:1200},e.convertMinsToHrsMins(1200)),r.a.createElement("option",{value:1260},e.convertMinsToHrsMins(1260)),r.a.createElement("option",{value:1320},e.convertMinsToHrsMins(1320)),r.a.createElement("option",{value:1380},e.convertMinsToHrsMins(1380)),r.a.createElement("option",{value:1440},e.convertMinsToHrsMins(1440)))))),r.a.createElement(k.a.Group,{controlId:"formHoursThursday"},r.a.createElement("h5",{className:"text-left"},"Thursday"),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[3].open_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:0},e.convertMinsToHrsMins(0)),r.a.createElement("option",{value:60},e.convertMinsToHrsMins(60)),r.a.createElement("option",{value:120},e.convertMinsToHrsMins(120)),r.a.createElement("option",{value:180},e.convertMinsToHrsMins(180)),r.a.createElement("option",{value:240},e.convertMinsToHrsMins(240)),r.a.createElement("option",{value:300},e.convertMinsToHrsMins(300)),r.a.createElement("option",{value:360},e.convertMinsToHrsMins(360)),r.a.createElement("option",{value:420},e.convertMinsToHrsMins(420)),r.a.createElement("option",{value:480},e.convertMinsToHrsMins(480)),r.a.createElement("option",{value:540},e.convertMinsToHrsMins(540)),r.a.createElement("option",{value:600},e.convertMinsToHrsMins(600)),r.a.createElement("option",{value:660},e.convertMinsToHrsMins(660)),r.a.createElement("option",{value:720},e.convertMinsToHrsMins(720)),r.a.createElement("option",{value:780},e.convertMinsToHrsMins(780)),r.a.createElement("option",{value:840},e.convertMinsToHrsMins(840)))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[3].close_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:900},e.convertMinsToHrsMins(900)),r.a.createElement("option",{value:960},e.convertMinsToHrsMins(960)),r.a.createElement("option",{value:1020},e.convertMinsToHrsMins(1020)),r.a.createElement("option",{value:1080},e.convertMinsToHrsMins(1080)),r.a.createElement("option",{value:1140},e.convertMinsToHrsMins(1140)),r.a.createElement("option",{value:1200},e.convertMinsToHrsMins(1200)),r.a.createElement("option",{value:1260},e.convertMinsToHrsMins(1260)),r.a.createElement("option",{value:1320},e.convertMinsToHrsMins(1320)),r.a.createElement("option",{value:1380},e.convertMinsToHrsMins(1380)),r.a.createElement("option",{value:1440},e.convertMinsToHrsMins(1440)))))),r.a.createElement(k.a.Group,{controlId:"formHoursFriday"},r.a.createElement("h5",{className:"text-left"},"Friday"),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[4].open_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:0},e.convertMinsToHrsMins(0)),r.a.createElement("option",{value:60},e.convertMinsToHrsMins(60)),r.a.createElement("option",{value:120},e.convertMinsToHrsMins(120)),r.a.createElement("option",{value:180},e.convertMinsToHrsMins(180)),r.a.createElement("option",{value:240},e.convertMinsToHrsMins(240)),r.a.createElement("option",{value:300},e.convertMinsToHrsMins(300)),r.a.createElement("option",{value:360},e.convertMinsToHrsMins(360)),r.a.createElement("option",{value:420},e.convertMinsToHrsMins(420)),r.a.createElement("option",{value:480},e.convertMinsToHrsMins(480)),r.a.createElement("option",{value:540},e.convertMinsToHrsMins(540)),r.a.createElement("option",{value:600},e.convertMinsToHrsMins(600)),r.a.createElement("option",{value:660},e.convertMinsToHrsMins(660)),r.a.createElement("option",{value:720},e.convertMinsToHrsMins(720)),r.a.createElement("option",{value:780},e.convertMinsToHrsMins(780)),r.a.createElement("option",{value:840},e.convertMinsToHrsMins(840)))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[4].close_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:900},e.convertMinsToHrsMins(900)),r.a.createElement("option",{value:960},e.convertMinsToHrsMins(960)),r.a.createElement("option",{value:1020},e.convertMinsToHrsMins(1020)),r.a.createElement("option",{value:1080},e.convertMinsToHrsMins(1080)),r.a.createElement("option",{value:1140},e.convertMinsToHrsMins(1140)),r.a.createElement("option",{value:1200},e.convertMinsToHrsMins(1200)),r.a.createElement("option",{value:1260},e.convertMinsToHrsMins(1260)),r.a.createElement("option",{value:1320},e.convertMinsToHrsMins(1320)),r.a.createElement("option",{value:1380},e.convertMinsToHrsMins(1380)),r.a.createElement("option",{value:1440},e.convertMinsToHrsMins(1440)))))),r.a.createElement(k.a.Group,{controlId:"formHoursSaturday"},r.a.createElement("h5",{className:"text-left"},"Saturday"),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[5].open_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:0},e.convertMinsToHrsMins(0)),r.a.createElement("option",{value:60},e.convertMinsToHrsMins(60)),r.a.createElement("option",{value:120},e.convertMinsToHrsMins(120)),r.a.createElement("option",{value:180},e.convertMinsToHrsMins(180)),r.a.createElement("option",{value:240},e.convertMinsToHrsMins(240)),r.a.createElement("option",{value:300},e.convertMinsToHrsMins(300)),r.a.createElement("option",{value:360},e.convertMinsToHrsMins(360)),r.a.createElement("option",{value:420},e.convertMinsToHrsMins(420)),r.a.createElement("option",{value:480},e.convertMinsToHrsMins(480)),r.a.createElement("option",{value:540},e.convertMinsToHrsMins(540)),r.a.createElement("option",{value:600},e.convertMinsToHrsMins(600)),r.a.createElement("option",{value:660},e.convertMinsToHrsMins(660)),r.a.createElement("option",{value:720},e.convertMinsToHrsMins(720)),r.a.createElement("option",{value:780},e.convertMinsToHrsMins(780)),r.a.createElement("option",{value:840},e.convertMinsToHrsMins(840)))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[5].close_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:900},e.convertMinsToHrsMins(900)),r.a.createElement("option",{value:960},e.convertMinsToHrsMins(960)),r.a.createElement("option",{value:1020},e.convertMinsToHrsMins(1020)),r.a.createElement("option",{value:1080},e.convertMinsToHrsMins(1080)),r.a.createElement("option",{value:1140},e.convertMinsToHrsMins(1140)),r.a.createElement("option",{value:1200},e.convertMinsToHrsMins(1200)),r.a.createElement("option",{value:1260},e.convertMinsToHrsMins(1260)),r.a.createElement("option",{value:1320},e.convertMinsToHrsMins(1320)),r.a.createElement("option",{value:1380},e.convertMinsToHrsMins(1380)),r.a.createElement("option",{value:1440},e.convertMinsToHrsMins(1440)))))),r.a.createElement(k.a.Group,{controlId:"formHoursSunday"},r.a.createElement("h5",{className:"text-left"},"Sunday"),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[6].open_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:0},e.convertMinsToHrsMins(0)),r.a.createElement("option",{value:60},e.convertMinsToHrsMins(60)),r.a.createElement("option",{value:120},e.convertMinsToHrsMins(120)),r.a.createElement("option",{value:180},e.convertMinsToHrsMins(180)),r.a.createElement("option",{value:240},e.convertMinsToHrsMins(240)),r.a.createElement("option",{value:300},e.convertMinsToHrsMins(300)),r.a.createElement("option",{value:360},e.convertMinsToHrsMins(360)),r.a.createElement("option",{value:420},e.convertMinsToHrsMins(420)),r.a.createElement("option",{value:480},e.convertMinsToHrsMins(480)),r.a.createElement("option",{value:540},e.convertMinsToHrsMins(540)),r.a.createElement("option",{value:600},e.convertMinsToHrsMins(600)),r.a.createElement("option",{value:660},e.convertMinsToHrsMins(660)),r.a.createElement("option",{value:720},e.convertMinsToHrsMins(720)),r.a.createElement("option",{value:780},e.convertMinsToHrsMins(780)),r.a.createElement("option",{value:840},e.convertMinsToHrsMins(840)))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",value:e.state.storeHours[6].close_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement("option",{value:900},e.convertMinsToHrsMins(900)),r.a.createElement("option",{value:960},e.convertMinsToHrsMins(960)),r.a.createElement("option",{value:1020},e.convertMinsToHrsMins(1020)),r.a.createElement("option",{value:1080},e.convertMinsToHrsMins(1080)),r.a.createElement("option",{value:1140},e.convertMinsToHrsMins(1140)),r.a.createElement("option",{value:1200},e.convertMinsToHrsMins(1200)),r.a.createElement("option",{value:1260},e.convertMinsToHrsMins(1260)),r.a.createElement("option",{value:1320},e.convertMinsToHrsMins(1320)),r.a.createElement("option",{value:1380},e.convertMinsToHrsMins(1380)),r.a.createElement("option",{value:1440},e.convertMinsToHrsMins(1440)))))),r.a.createElement(k.a.Group,{controlId:"pictures"},r.a.createElement(k.a.Label,null,"Delete Images"),e.state.pictures.map((function(t,n){return r.a.createElement("div",{key:"pic-"+n},r.a.createElement("img",{className:"img-fluid",src:t.url,alt:"Slide "+n}),r.a.createElement(k.a.Check,{id:t.key,label:t.key.split("/").slice(-1)[0],onChange:function(t){return e.deleteFileChangeHandler(t,c,a.pictures.length)}}))}))),r.a.createElement(k.a.Group,{controlId:"pictureCount"},r.a.createElement(k.a.Label,null,"Add Images"),r.a.createElement("br",null),r.a.createElement("input",{onChange:function(t){return e.fileChangedHandler(t,c,a.pictures)},type:"file",multiple:!0,className:s.pictures&&n.pictures?"error":null}),s.pictureCount&&n.pictureCount?r.a.createElement("div",{className:"error-message"},n.pictureCount):null),r.a.createElement(M.a,{onClick:i},"Submit"))}))))}}]),t}(r.a.Component),aa=Object(i.h)(ta);function na(e){return function(t){function a(e){var t;return Object(c.a)(this,a),(t=Object(m.a)(this,Object(p.a)(a).call(this,e))).state={loading:!0,redirect:!1},t}return Object(h.a)(a,t),Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.store_id?vt.a.get("token")?fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/checkTokenAndPermissions",{method:"POST",headers:{"Content-type":"application/json"},credentials:"include",body:JSON.stringify({store_id:this.props.match.params.store_id,worker_id:this.props.match.params.worker_id,user_id:JSON.parse(vt.a.get("user").substring(2)).id})}).then((function(t){if(200!==t.status)throw new Error(t.error);e.setState({loading:!1})})).catch((function(t){e.setState({loading:!1,redirect:!0})})):this.setState({loading:!1,redirect:!0}):fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/checkToken",{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(t){if(200!==t.status)throw new Error(t.error);e.props.match.params.user_id&&(JSON.parse(vt.a.get("user").substring(2)).id==e.props.match.params.user_id?e.setState({loading:!1}):e.setState({loading:!1,redirect:!0})),e.setState({loading:!1})})).catch((function(t){e.setState({loading:!1,redirect:!0})}))}},{key:"render",value:function(){var t=this.state,a=t.loading,n=t.redirect;return a?null:n?r.a.createElement(i.a,{to:"/login"}):r.a.createElement(e,this.props)}}]),a}(n.Component)}var ra=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={user:{first_name:"",last_name:"",phone:"",password:"",password_confirmation:"",id:""}},a.phoneRegExp=/^(\+?\d{0,4})?\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{3}\)?)\s?-?\s?(\(?\d{4}\)?)?$/,a.yupValidationSchema=F.c().shape({first_name:F.e().min(2,"First name must have at least 2 characters").max(100,"First name can't be longer than 100 characters").required("First name is required"),last_name:F.e().min(2,"Last name must have at least 2 characters").max(100,"Last name can't be longer than 100 characters").required("Last name is required"),phone:F.e().matches(a.phoneRegExp,"Phone number is not valid"),password:F.e().min(6,"Password must have at least 6 characters").max(100,"Password can't be longer than 100 characters").required("Password is required"),password_confirmation:F.e().oneOf([F.d("password")],"Passwords do not match").required("Password confirmation is required")}),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.user!==this.props.user&&this.props.history.push({pathname:"/users/"+this.props.user.id})}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{fluid:!0},r.a.createElement(E.a,{className:"justify-content-center"},r.a.createElement(g.a,{xs:8,sm:7,md:6,lg:5},r.a.createElement(A.a,{enableReinitialize:!0,initialValues:{first_name:this.props.user.first_name,last_name:this.props.user.last_name,phone:this.props.user.phone,password:"",password_confirmation:"",id:0},validationSchema:this.yupValidationSchema,onSubmit:function(t){t.id=e.props.match.params.user_id,e.props.editProfile(t)}},(function(e){var t=e.values,a=e.errors,n=e.touched,s=e.handleChange,o=e.handleBlur,l=e.handleSubmit;return r.a.createElement(k.a,{className:"formBody rounded"},r.a.createElement("h3",null,"Edit Profile"),r.a.createElement(k.a.Group,{controlId:"formFirstName"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.m,null))),r.a.createElement(k.a.Control,{type:"text",name:"first_name",value:t.first_name,placeholder:"First Name",onChange:s,onBlur:o,className:n.first_name&&a.first_name?"error":null})),n.first_name&&a.first_name?r.a.createElement("div",{className:"error-message"},a.first_name):null),r.a.createElement(k.a.Group,{controlId:"formLastName"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.m,null))),r.a.createElement(k.a.Control,{type:"text",value:t.last_name,placeholder:"Last Name",name:"last_name",onChange:s,onBlur:o,className:n.last_name&&a.last_name?"error":null})),n.last_name&&a.last_name?r.a.createElement("div",{className:"error-message"},a.last_name):null),r.a.createElement(k.a.Group,{controlId:"formPhone"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.k,null))),r.a.createElement(k.a.Control,{type:"text",value:t.phone,placeholder:"Phone Number",name:"phone",onChange:s,onBlur:o,className:n.phone&&a.phone?"error":null})),n.phone&&a.phone?r.a.createElement("div",{className:"error-message"},a.phone):null),r.a.createElement(k.a.Group,{controlId:"formPassword"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.h,null))),r.a.createElement(k.a.Control,{type:"password",value:t.password,placeholder:"Password",name:"password",onChange:s,onBlur:o,className:n.password&&a.password?"error":null})),n.password&&a.password?r.a.createElement("div",{className:"error-message"},a.password):null),r.a.createElement(k.a.Group,{controlId:"formPasswordConfirmation"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.g,null))),r.a.createElement(k.a.Control,{type:"password",value:t.password_confirmation,placeholder:"Confirm Password",name:"password_confirmation",onChange:s,onBlur:o,className:n.password_confirmation&&a.password_confirmation?"error":null})),n.password_confirmation&&a.password_confirmation?r.a.createElement("div",{className:"error-message"},a.password_confirmation):null),r.a.createElement(M.a,{onClick:l},"Submit"))})))))}}]),t}(r.a.Component),sa=Object(x.b)((function(e){return{user:e.userReducer.user}}),(function(e){return Object(O.b)({editProfile:function(e,t,a){return n=e,function(e){fetch(D+"/users/"+n.id,{method:"POST",headers:{"Content-type":"application/json"},credentials:"include",body:JSON.stringify(n)}).then((function(t){if(e(I(t)),200===t.status)return t.json();e(Object(N.failure)(t))})).then((function(t){if(t)return e({type:"EDIT_USER_SUCCESS",user:t}),t}))};var n}},e)}))(ra),oa=function(e){function t(e){return Object(c.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(v.a,{fluid:!0},r.a.createElement(E.a,{className:"justify-content-center"},r.a.createElement(g.a,null,r.a.createElement("h1",null,this.props.user.first_name," ",this.props.user.last_name),r.a.createElement("h1",null,this.props.user.phone),r.a.createElement("h1",null,this.props.user.email))))}}]),t}(r.a.Component),la=Object(x.b)((function(e){return{user:e.userReducer.user}}))(oa),ia=(a(405),a(406),a(407),function(){return r.a.createElement(Xe.a,{speed:1,style:{width:"100%",height:"100%"},viewBox:"0 0 1000 1500",backgroundColor:"#f3f3f3",foregroundColor:"#eae8e8"},r.a.createElement("rect",{className:"d-none d-md-block",x:"50",y:"30",rx:"0",ry:"0",width:"500",height:"250"}),r.a.createElement("rect",{className:"d-none d-md-block",x:"630",y:"71",rx:"3",ry:"3",width:"200",height:"15"}),r.a.createElement("rect",{className:"d-none d-md-block",x:"645",y:"105",rx:"3",ry:"3",width:"164",height:"6"}),r.a.createElement("rect",{className:"d-none d-md-block",x:"630",y:"130",rx:"3",ry:"3",width:"200",height:"25"}),r.a.createElement("rect",{className:"d-none d-md-block",x:"630",y:"170",rx:"3",ry:"3",width:"200",height:"25"}),r.a.createElement("rect",{className:"d-none d-md-block",x:"630",y:"210",rx:"3",ry:"3",width:"200",height:"25"}),r.a.createElement("rect",{className:"d-block d-md-none",x:"66",y:"0",rx:"0",ry:"0",width:"858",height:"614"}),r.a.createElement("rect",{className:"d-block d-md-none",x:"69",y:"689",rx:"3",ry:"3",width:"858",height:"115"}),r.a.createElement("rect",{className:"d-block d-md-none",x:"104",y:"869",rx:"3",ry:"3",width:"788",height:"55"}),r.a.createElement("rect",{className:"d-block d-md-none",x:"49",y:"999",rx:"3",ry:"3",width:"900",height:"115"}),r.a.createElement("rect",{className:"d-block d-md-none",x:"49",y:"1169",rx:"3",ry:"3",width:"900",height:"115"}),r.a.createElement("rect",{className:"d-block d-md-none",x:"49",y:"1339",rx:"3",ry:"3",width:"900",height:"115"}))}),ca=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={stores:[{id:"",name:"",address:"",created_at:"",category:[],services:[],workers:[],owners:[],phone:"",clients:[],description:"",lat:"",lng:""}],redirectToWorkerForm:null,store_id:null,loading:!0},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"triggerStoreEdit",value:function(e){this.props.history.push({pathname:"/stores/edit/"+e.id,state:{store:e}})}},{key:"triggerAddWorker",value:function(e){this.props.history.push({pathname:"/stores/addWorker/"+e})}},{key:"triggerShowWorkers",value:function(e){this.props.history.push({pathname:"/stores/"+e+"/workers"})}},{key:"triggerStoreShow",value:function(e){this.props.history.push({pathname:"/stores/"+e.id,state:{store:e}})}},{key:"triggerShowServices",value:function(e){this.props.history.push({pathname:"/stores/"+e+"/services"})}},{key:"triggerAddService",value:function(e){this.props.history.push({pathname:"/stores/addService/"+e})}},{key:"triggerShowCalendar",value:function(e){this.props.history.push({pathname:"/storeCalendar/"+e.id,state:{store:e}})}},{key:"componentDidMount",value:function(){var e=this;fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/stores/users/"+this.props.match.params.user_id,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){if(200===e.status)return e.json();ve.dispatch(I(e))})).then(function(){var t=Object(Be.a)(Ge.a.mark((function t(a){var n;return Ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=5;break}return t.next=3,Promise.all(a.map(function(){var e=Object(Be.a)(Ge.a.mark((function e(t){var a,n;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St("stores/"+t.id+"/images/");case 2:return 0==(a=e.sent).length&&(a=[{url:"/hair.jpg",key:"/hair.jpg"},{url:"/nails.jpg",key:"/nails.jpg"},{url:"/salon.jpg",key:"/salon.jpg"}]),(n=Object.assign({},t)).pictures=a,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:n=t.sent,e.setState({stores:n,loading:!1});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{fluid:!0},r.a.createElement((function(t){return e.state.loading?r.a.createElement(E.a,{className:"mt-5"},r.a.createElement(g.a,{xs:"12"},r.a.createElement(ia,null))):r.a.createElement(r.a.Fragment,null,e.state.stores.map((function(t,a){return r.a.createElement("div",{key:"store"+a},r.a.createElement(E.a,{className:"justify-content-center align-content-center my-5"},r.a.createElement(g.a,{md:6,className:"vertical-align-contents"},r.a.createElement(ze.a,{className:"dashboard-carousel",interval:""},t.pictures.map((function(t,a){return r.a.createElement(ze.a.Item,{key:"pic-"+a},r.a.createElement(V.a,{fluid:!0,src:t.url,alt:"alt-"+a}),r.a.createElement("img",{style:e.props.img,src:t.url,alt:"Slide "+a}))})))),r.a.createElement(g.a,{md:5,className:"vertical-align-contents"},r.a.createElement(E.a,{className:"justify-content-center"},r.a.createElement(g.a,{sm:12},r.a.createElement("span",{className:"name",onClick:function(){return e.triggerStoreShow(t)},style:{cursor:"pointer"}}," ",t.name," "),r.a.createElement(w.c,{className:"edit mb-3",size:25,onClick:function(){return e.triggerStoreEdit(t)}})),r.a.createElement(g.a,{sm:12},r.a.createElement("p",{className:"address"},t.address," ")),r.a.createElement(g.a,{sm:8,className:"py-1"},r.a.createElement(M.a,{block:!0,className:"update_button",onClick:function(){return e.triggerShowCalendar(t)}},"Calendar")," \xa0"),r.a.createElement(g.a,{sm:8,className:"py-1"},r.a.createElement(M.a,{block:!0,className:"update_button",onClick:function(){return e.triggerShowWorkers(t.id)}},"Workers")," \xa0"),r.a.createElement(g.a,{sm:8,className:"py-1"},r.a.createElement(M.a,{block:!0,className:"update_button",onClick:function(){return e.triggerShowServices(t.id)}},"Services")," \xa0")))))})))}),null))}}]),t}(r.a.Component),ua=Object(x.b)((function(e){return{user:e.userReducer.user}}))(ca);function ma(){var e=Object(nt.a)(["\n  display: block;\n  margin: 0 auto;\n"]);return ma=function(){return e},e}var pa=Object(ut.css)(ma()),da=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleSelectChange=function(e){var t,n,r=["formHoursMonday","formHoursTuesday","formHoursWednesday","formHoursThursday","formHoursFriday","formHoursSaturday","formHoursSunday"].indexOf(e.target.id),s=[];t=a.state.workerHours[r].start_time,n=a.state.workerHours[r].end_time,s=parseInt(e.target.querySelector("option").value)<=840?[].concat(Object(at.a)(a.state.workerHours.slice(0,r)),[{start_time:parseInt(e.target.value),end_time:n}],Object(at.a)(a.state.workerHours.slice(r+1))):[].concat(Object(at.a)(a.state.workerHours.slice(0,r)),[{start_time:t,end_time:parseInt(e.target.value)}],Object(at.a)(a.state.workerHours.slice(r+1))),a.setState({workerHours:s})},a.handleDayStatusChange=function(e){var t=[].concat(Object(at.a)(a.state.weekIsWorking.slice(0,e)),[!a.state.weekIsWorking[e]],Object(at.a)(a.state.weekIsWorking.slice(e+1)));a.setState({weekIsWorking:t})},a.state={options:[{value:0,label:"Brazilian Blowout"},{value:1,label:"Manicure"}],workerHours:[],storeHours:[],weekIsWorking:[!0,!0,!0,!0,!0,!0,!0],loading:!0},a.emailRegExp=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/,a.yupValidationSchema=F.c().shape({email:F.e().email("Must be a valid email address").max(100,"Email must be less than 100 characters").required("Email is required")}),a.triggerWorkerDisplay=a.triggerWorkerDisplay.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"convertMinsToHrsMins",value:function(e){var t=Math.floor(e/60),a=e%60,n=!1;return 24==t?(n=!0,t-=12):t<12?n=!0:12!=t&&(t-=12),0==(t=t<10?"0"+t:t)&&(t="12"),a=a<10?"0"+a:a,n?"".concat(t,":").concat(a,"am"):"".concat(t,":").concat(a,"pm")}},{key:"triggerWorkerDisplay",value:function(e){this.props.history.push({pathname:"/stores/"+this.props.match.params.store_id+"/workers/"+e.id,state:{worker:e}})}},{key:"componentDidMount",value:function(){var e=this;fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/stores/"+this.props.match.params.store_id+"/storeHours",{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){if(200===e.status)return e.json();ve.dispatch(I(e))})).then((function(t){if(t){var a=t.map((function(e){return{start_time:e.open_time,end_time:e.close_time}}));e.setState({storeHours:t,workerHours:a,loading:!1})}}))}},{key:"render",value:function(){var e=this,t=function(t){for(var a=[],n=e.state.storeHours[t.day].open_time;n<=840;n+=60)a.push(r.a.createElement("option",{key:n,value:n},e.convertMinsToHrsMins(n)));return a},a=function(t){for(var a=[],n=900;n<=e.state.storeHours[t.day].close_time;n+=60)a.push(r.a.createElement("option",{key:n,value:n},e.convertMinsToHrsMins(n)));return a};return r.a.createElement(v.a,{fluid:!0},r.a.createElement((function(n){return e.state.loading?r.a.createElement(E.a,{className:"vertical-center"},r.a.createElement(g.a,null,r.a.createElement(ct.a,{css:pa,size:20,color:"#2196f3",loading:e.state.isLoading}))):r.a.createElement(E.a,{className:"justify-content-center"},r.a.createElement(g.a,{xs:8,sm:7,md:6,lg:5},r.a.createElement(A.a,{initialValues:{email:"",services:"",workerHours:[]},validationSchema:e.yupValidationSchema,onSubmit:function(t){var a=e.props.match.params.store_id,n=e.triggerWorkerDisplay;t.workerHours=e.state.workerHours,t.services=t.services.map((function(e){return e.value})),fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/stores/addWorker/"+a,{method:"POST",headers:{"Content-type":"application/json"},credentials:"include",body:JSON.stringify(t)}).then((function(e){if(200===e.status)return e.json();ve.dispatch(I(e))})).then((function(e){e&&n(e)}))}},(function(n){var s=n.values,o=n.errors,l=n.touched,i=n.handleChange,c=n.handleBlur,u=n.handleSubmit,m=n.setFieldValue;return r.a.createElement(k.a,{className:"formBody rounded"},r.a.createElement("h3",null,"Add Worker"),r.a.createElement(k.a.Group,{controlId:"formEmail"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.d,null))),r.a.createElement(k.a.Control,{type:"email",value:s.email,placeholder:"Email",name:"email",onChange:i,onBlur:c,className:l.email&&o.email?"error":null})),l.email&&o.email?r.a.createElement("div",{className:"error-message"},o.email):null),r.a.createElement(k.a.Group,{controlId:"formServices"},r.a.createElement(K.a,{value:s.services,onChange:function(e){return m("services",e)},name:"services",options:e.state.options,isMulti:!0,placeholder:"Services",className:l.services&&o.services?"error":null}),l.services&&o.services?r.a.createElement("div",{className:"error-message"},o.services):null),r.a.createElement("h4",null,"Worker Hours"),r.a.createElement(k.a.Group,{controlId:"formHoursMonday"},r.a.createElement(k.a.Row,{className:"text-left"},r.a.createElement(g.a,null,r.a.createElement("h5",null,"Monday"),r.a.createElement(k.a.Check,{type:"checkbox",id:"monday-toggle",label:"Working Today?",checked:e.state.weekIsWorking[0],onChange:function(){return e.handleDayStatusChange(0)}}))),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[0],value:e.state.workerHours[0].start_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(t,{day:0}))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[0],value:e.state.workerHours[0].end_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(a,{day:0}))))),r.a.createElement(k.a.Group,{controlId:"formHoursTuesday"},r.a.createElement(k.a.Row,{className:"text-left"},r.a.createElement(g.a,null,r.a.createElement("h5",null,"Tuesday"),r.a.createElement(k.a.Check,{type:"checkbox",id:"tuesday-toggle",label:"Working Today?",checked:e.state.weekIsWorking[1],onChange:function(){return e.handleDayStatusChange(1)}}))),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[1],value:e.state.workerHours[1].start_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(t,{day:1}))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[1],value:e.state.workerHours[1].end_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(a,{day:1}))))),r.a.createElement(k.a.Group,{controlId:"formHoursWednesday"},r.a.createElement(k.a.Row,{className:"text-left"},r.a.createElement(g.a,null,r.a.createElement("h5",null,"Wednesday"),r.a.createElement(k.a.Check,{type:"checkbox",id:"wednesday-toggle",label:"Working Today?",checked:e.state.weekIsWorking[2],onChange:function(){return e.handleDayStatusChange(2)}}))),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[2],value:e.state.workerHours[2].start_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(t,{day:2}))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[2],value:e.state.workerHours[2].end_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(a,{day:2}))))),r.a.createElement(k.a.Group,{controlId:"formHoursThursday"},r.a.createElement(k.a.Row,{className:"text-left"},r.a.createElement(g.a,null,r.a.createElement("h5",null,"Thursday"),r.a.createElement(k.a.Check,{type:"checkbox",id:"thursday-toggle",label:"Working Today?",checked:e.state.weekIsWorking[3],onChange:function(){return e.handleDayStatusChange(3)}}))),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[3],value:e.state.workerHours[3].start_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(t,{day:3}))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[3],value:e.state.workerHours[3].end_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(a,{day:3}))))),r.a.createElement(k.a.Group,{controlId:"formHoursFriday"},r.a.createElement(k.a.Row,{className:"text-left"},r.a.createElement(g.a,null,r.a.createElement("h5",null,"Friday"),r.a.createElement(k.a.Check,{type:"checkbox",id:"friday-toggle",label:"Working Today?",checked:e.state.weekIsWorking[4],onChange:function(){return e.handleDayStatusChange(4)}}))),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[4],value:e.state.workerHours[4].start_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(t,{day:4}))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[4],value:e.state.workerHours[4].end_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(a,{day:4}))))),r.a.createElement(k.a.Group,{controlId:"formHoursSaturday"},r.a.createElement(k.a.Row,{className:"text-left"},r.a.createElement(g.a,null,r.a.createElement("h5",null,"Saturday"),r.a.createElement(k.a.Check,{type:"checkbox",id:"saturday-toggle",label:"Working Today?",checked:e.state.weekIsWorking[5],onChange:function(){return e.handleDayStatusChange(5)}}))),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[5],value:e.state.workerHours[5].start_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(t,{day:5}))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[5],value:e.state.workerHours[5].end_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(a,{day:5}))))),r.a.createElement(k.a.Group,{controlId:"formHoursSunday"},r.a.createElement(k.a.Row,{className:"text-left"},r.a.createElement(g.a,null,r.a.createElement("h5",null,"Sunday"),r.a.createElement(k.a.Check,{type:"checkbox",id:"sunday-toggle",label:"Working Today?",checked:e.state.weekIsWorking[6],onChange:function(){return e.handleDayStatusChange(6)}}))),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[6],value:e.state.workerHours[6].start_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(t,{day:6}))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[6],value:e.state.workerHours[6].end_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(a,{day:6}))))),r.a.createElement(M.a,{onClick:u},"Submit"))}))))}),null))}}]),t}(r.a.Component),ha=(a(408),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={workers:[],redirectToWorkerEditForm:null,redirectToWorkerDisplay:null},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"triggerWorkerEditForm",value:function(e){this.props.history.push({pathname:"/stores/"+this.props.match.params.store_id+"/workers/"+e.id+"/edit",state:{worker:e}})}},{key:"triggerWorkerDisplay",value:function(e){this.props.history.push({pathname:"/stores/"+this.props.match.params.store_id+"/workers/"+e.id,state:{worker:e}})}},{key:"triggerAddWorker",value:function(){this.props.history.push({pathname:"/stores/addWorker/"+this.props.match.params.store_id})}},{key:"componentDidMount",value:function(){var e=this;this.props.location.state&&this.props.location.state.workers?this.setState({workers:this.props.location.state.workers}):fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/stores/"+this.props.match.params.store_id+"/workers",{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){if(200===e.status)return e.json()})).then((function(t){t&&e.setState({workers:t})}))}},{key:"render",value:function(){var e=this,t=null;return t=0!=this.state.workers.length?r.a.createElement("div",null,this.state.workers.map((function(t){return r.a.createElement(g.a,{key:"worker-"+t.id},r.a.createElement(M.a,{onClick:function(){return e.triggerWorkerDisplay(t)}},"Show Worker"),r.a.createElement(M.a,{onClick:function(){return e.triggerWorkerEditForm(t)}},"Edit Worker"))}))):r.a.createElement("div",null,r.a.createElement("p",{className:"noResults"},"No Workers!"),r.a.createElement(M.a,{onClick:function(){return e.triggerAddWorker()}},"Add Worker")),r.a.createElement(v.a,{fluid:!0},r.a.createElement(E.a,{className:"justify-content-center"},t))}}]),t}(r.a.Component));a(409);function va(){var e=Object(nt.a)(["\n  display: block;\n  margin: 0 auto;\n"]);return va=function(){return e},e}var Ea="http://bloom-490-dev.us-east-1.elasticbeanstalk.com",ga=Object(ut.css)(va()),fa=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleSelectChange=function(e){var t=["formHoursMonday","formHoursTuesday","formHoursWednesday","formHoursThursday","formHoursFriday","formHoursSaturday","formHoursSunday"].indexOf(e.target.id),n=a.state.newHours,r=0,s=0,o=[];a.state.newHours[t]?(r=a.state.newHours[t].start_time,s=a.state.newHours[t].end_time):(r=a.state.workerHours[t].start_time,s=a.state.workerHours[t].end_time),parseInt(e.target.querySelector("option").value)<=840?(n[t]={start_time:parseInt(e.target.value),end_time:s},o=[].concat(Object(at.a)(a.state.workerHours.slice(0,t)),[{start_time:parseInt(e.target.value),end_time:s}],Object(at.a)(a.state.workerHours.slice(t+1)))):(n[t]={start_time:r,end_time:parseInt(e.target.value)},o=[].concat(Object(at.a)(a.state.workerHours.slice(0,t)),[{start_time:r,end_time:parseInt(e.target.value)}],Object(at.a)(a.state.workerHours.slice(t+1)))),a.setState({newHours:n,workerHours:o})},a.handleDayStatusChange=function(e){var t=[].concat(Object(at.a)(a.state.weekIsWorking.slice(0,e)),[!a.state.weekIsWorking[e]],Object(at.a)(a.state.weekIsWorking.slice(e+1)));a.setState({weekIsWorking:t})},a.state={worker:{id:0,store_id:0,services:[],user_id:0,created_at:"",first_name:"",last_name:""},options:[{value:0,label:"Brazilian Blowout"},{value:1,label:"Manicure"}],serviceMapping:{0:"Brazilian Blowout",1:"Manicure"},storeHours:[{day_of_the_week:0,start_time:0,end_time:0},{day_of_the_week:1,start_time:0,end_time:0},{day_of_the_week:2,start_time:0,end_time:0},{day_of_the_week:3,start_time:0,end_time:0},{day_of_the_week:4,start_time:0,end_time:0},{day_of_the_week:5,start_time:0,end_time:0},{day_of_the_week:6,start_time:0,end_time:0}],workerHours:[{day_of_the_week:0,start_time:0,end_time:0},{day_of_the_week:1,start_time:0,end_time:0},{day_of_the_week:2,start_time:0,end_time:0},{day_of_the_week:3,start_time:0,end_time:0},{day_of_the_week:4,start_time:0,end_time:0},{day_of_the_week:5,start_time:0,end_time:0},{day_of_the_week:6,start_time:0,end_time:0}],loading:!0,newHours:[],weekIsWorking:[!0,!0,!0,!0,!0,!0,!0]},a.triggerWorkerDisplay=a.triggerWorkerDisplay.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"triggerWorkerDisplay",value:function(e){this.props.history.push({pathname:"/stores/"+this.props.match.params.store_id+"/workers/"+this.props.match.params.worker_id,state:{worker:e}})}},{key:"convertMinsToHrsMins",value:function(e){var t=Math.floor(e/60),a=e%60,n=!1;return 24==t?(n=!0,t-=12):t<12?n=!0:12!=t&&(t-=12),0==(t=t<10?"0"+t:t)&&(t="12"),a=a<10?"0"+a:a,n?"".concat(t,":").concat(a,"am"):"".concat(t,":").concat(a,"pm")}},{key:"componentDidMount",value:function(){var e=this;this.props.location.state&&this.props.location.state.worker?this.setState({worker:this.props.location.state.worker}):fetch(Ea+"/stores/"+this.props.match.params.store_id+"/workers/"+this.props.match.params.worker_id,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){if(200===e.status)return e.json();ve.dispatch(I(e))})).then((function(t){t&&e.setState({worker:t})})),Promise.all([fetch(Ea+"/stores/"+this.props.match.params.store_id+"/workers/"+this.props.match.params.worker_id+"/hours",{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){return e.json()})),fetch(Ea+"/stores/"+this.props.match.params.store_id+"/storeHours",{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){return e.json()}))]).then((function(t){e.setState({storeHours:t[1],workerHours:t[0],loading:!1})}))}},{key:"render",value:function(){var e=this,t=function(t){for(var a=[],n=e.state.storeHours[t.day].open_time;n<=840;n+=60)a.push(r.a.createElement("option",{key:n,value:n},e.convertMinsToHrsMins(n)));return a},a=function(t){for(var a=[],n=900;n<=e.state.storeHours[t.day].close_time;n+=60)a.push(r.a.createElement("option",{key:n,value:n},e.convertMinsToHrsMins(n)));return a};return r.a.createElement(v.a,{fluid:!0},r.a.createElement((function(n){return e.state.loading?r.a.createElement(E.a,{className:"vertical-center"},r.a.createElement(g.a,null,r.a.createElement(ct.a,{css:ga,size:20,color:"#2196f3",loading:e.state.isLoading}))):r.a.createElement(E.a,{className:"justify-content-center"},r.a.createElement(g.a,null,r.a.createElement(A.a,{enableReinitialize:!0,initialValues:{services:e.state.worker.services,id:e.state.worker.id,store_id:e.state.worker.store_id,user_id:e.state.worker.user_id,created_at:e.state.worker.created_at,first_name:e.state.worker.first_name,last_name:e.state.worker.last_name,newHours:e.state.newHours,noChange:!1},validationSchema:e.yupValidationSchema,onSubmit:function(t){var a=e.props.match.params.store_id,n=e.props.match.params.worker_id,r=e.triggerWorkerDisplay;t.newHours.map((function(t,a){return e.state.weekIsWorking[a]?t:{start_time:null,end_time:null}})),fetch(Ea+"/stores/"+a+"/workers/"+n,{method:"POST",headers:{"Content-type":"application/json"},credentials:"include",body:JSON.stringify(t)}).then((function(e){if(200===e.status)return e.json();ve.dispatch(I(e))})).then((function(e){e&&r(e)}))}},(function(n){n.values,n.errors,n.touched,n.handleChange,n.handleBlur;var s=n.handleSubmit;n.setFieldValue;return r.a.createElement(k.a,null,r.a.createElement("h3",null,"Worker Edit"),r.a.createElement("h4",null,"Worker Hours"),r.a.createElement(k.a.Group,{controlId:"formHoursMonday"},r.a.createElement(k.a.Row,{className:"text-left"},r.a.createElement(g.a,null,r.a.createElement("h5",null,"Monday"),r.a.createElement(k.a.Check,{type:"checkbox",id:"monday-toggle",label:"Working Today?",checked:e.state.weekIsWorking[0],onChange:function(){return e.handleDayStatusChange(0)}}))),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[0],value:e.state.workerHours[0].start_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(t,{day:0}))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[0],value:e.state.workerHours[0].end_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(a,{day:0}))))),r.a.createElement(k.a.Group,{controlId:"formHoursTuesday"},r.a.createElement(k.a.Row,{className:"text-left"},r.a.createElement(g.a,null,r.a.createElement("h5",null,"Tuesday"),r.a.createElement(k.a.Check,{type:"checkbox",id:"tuesday-toggle",label:"Working Today?",checked:e.state.weekIsWorking[1],onChange:function(){return e.handleDayStatusChange(1)}}))),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[1],value:e.state.workerHours[1].start_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(t,{day:1}))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[1],value:e.state.workerHours[1].end_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(a,{day:1}))))),r.a.createElement(k.a.Group,{controlId:"formHoursWednesday"},r.a.createElement(k.a.Row,{className:"text-left"},r.a.createElement(g.a,null,r.a.createElement("h5",null,"Wednesday"),r.a.createElement(k.a.Check,{type:"checkbox",id:"wednesday-toggle",label:"Working Today?",checked:e.state.weekIsWorking[2],onChange:function(){return e.handleDayStatusChange(2)}}))),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[2],value:e.state.workerHours[2].start_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(t,{day:2}))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[2],value:e.state.workerHours[2].end_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(a,{day:2}))))),r.a.createElement(k.a.Group,{controlId:"formHoursThursday"},r.a.createElement(k.a.Row,{className:"text-left"},r.a.createElement(g.a,null,r.a.createElement("h5",null,"Thursday"),r.a.createElement(k.a.Check,{type:"checkbox",id:"thursday-toggle",label:"Working Today?",checked:e.state.weekIsWorking[3],onChange:function(){return e.handleDayStatusChange(3)}}))),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[3],value:e.state.workerHours[3].start_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(t,{day:3}))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[3],value:e.state.workerHours[3].end_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(a,{day:3}))))),r.a.createElement(k.a.Group,{controlId:"formHoursFriday"},r.a.createElement(k.a.Row,{className:"text-left"},r.a.createElement(g.a,null,r.a.createElement("h5",null,"Friday"),r.a.createElement(k.a.Check,{type:"checkbox",id:"friday-toggle",label:"Working Today?",checked:e.state.weekIsWorking[4],onChange:function(){return e.handleDayStatusChange(4)}}))),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[4],value:e.state.workerHours[4].start_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(t,{day:4}))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[4],value:e.state.workerHours[4].end_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(a,{day:4}))))),r.a.createElement(k.a.Group,{controlId:"formHoursSaturday"},r.a.createElement(k.a.Row,{className:"text-left"},r.a.createElement(g.a,null,r.a.createElement("h5",null,"Saturday"),r.a.createElement(k.a.Check,{type:"checkbox",id:"saturday-toggle",label:"Working Today?",checked:e.state.weekIsWorking[5],onChange:function(){return e.handleDayStatusChange(5)}}))),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[5],value:e.state.workerHours[5].start_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(t,{day:5}))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[5],value:e.state.workerHours[5].end_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(a,{day:5}))))),r.a.createElement(k.a.Group,{controlId:"formHoursSunday"},r.a.createElement(k.a.Row,{className:"text-left"},r.a.createElement(g.a,null,r.a.createElement("h5",null,"Sunday"),r.a.createElement(k.a.Check,{type:"checkbox",id:"sunday-toggle",label:"Working Today?",checked:e.state.weekIsWorking[6],onChange:function(){return e.handleDayStatusChange(6)}}))),r.a.createElement(k.a.Row,null,r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[6],value:e.state.workerHours[6].start_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(t,{day:6}))),r.a.createElement(g.a,null,r.a.createElement(k.a.Control,{as:"select",disabled:!e.state.weekIsWorking[6],value:e.state.workerHours[6].end_time,onChange:e.handleSelectChange.bind(e)},r.a.createElement(a,{day:6}))))),r.a.createElement(M.a,{onClick:s},"Submit"))}))))}),null))}}]),t}(r.a.Component),ya=Object(i.h)(fa);function ba(){var e=Object(nt.a)(["\n  display: block;\n  margin: 0 auto;\n"]);return ba=function(){return e},e}var ka="http://bloom-490-dev.us-east-1.elasticbeanstalk.com",Ma=Object(ut.css)(ba()),Ca=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).updateWorker=function(e,t,n){var r=a.state.workerHours.map((function(e,a){return null!=t[a]?t[a]:e}));a.setState({worker:e,workerHours:r,receivedServices:n})},a.updateContent=function(e){a.setState({choice:e})},a.state={worker:{id:0,store_id:0,services:[],user_id:0,created_at:"",first_name:[],last_name:""},serviceMapping:{0:"Brazilian Blowout",1:"Manicure"},loading:!0,workerHours:[],receivedServices:[],selectedOption:[],storeHours:[],choice:0,daysOfWeek:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"convertMinsToHrsMins",value:function(e){var t=Math.floor(e/60),a=e%60,n=!1;return 24==t?(n=!0,t-=12):t<12?n=!0:12!=t&&(t-=12),0==(t=t<10?"0"+t:t)&&(t="12"),a=a<10?"0"+a:a,n?"".concat(t,":").concat(a,"am"):"".concat(t,":").concat(a,"pm")}},{key:"componentDidMount",value:function(){var e=this;if(this.props.location&&this.props.location.state&&this.props.location.state.worker){this.props.location.state.worker.services.map((function(t){return{value:t,label:e.state.serviceMapping[t]}}));Promise.all([fetch(ka+"/stores/"+this.props.match.params.store_id+"/workers/"+this.props.match.params.worker_id+"/hours",{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){return e.json()})),fetch(ka+"/stores/"+this.props.match.params.store_id+"/storeHours",{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){return e.json()}))]).then((function(t){var a=t[1].map((function(e){return{start_time:e.open_time,end_time:e.close_time}}));t[0]&&7==t[0].length?a=t[0]:e.setState({newHours:a}),e.setState({worker:e.props.location.state.worker,receivedServices:e.props.location.state.worker.services,storeHours:t[1],workerHours:a,loading:!1})}))}else Promise.all([fetch(ka+"/stores/"+this.props.match.params.store_id+"/workers/"+this.props.match.params.worker_id,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){return e.json()})),fetch(ka+"/stores/"+this.props.match.params.store_id+"/storeHours",{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){return e.json()})),fetch(ka+"/stores/"+this.props.match.params.store_id+"/workers/"+this.props.match.params.worker_id+"/hours",{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){return e.json()}))]).then((function(t){var a=t[0].services.map((function(t){return{value:t,label:e.state.serviceMapping[t]}})),n=t[1].map((function(e){return{start_time:e.open_time,end_time:e.close_time}}));t[2]&&7==t[2].length?n=t[2]:e.setState({newHours:n}),e.setState({worker:t[0],receivedServices:t[0].services,selectedOption:a,storeHours:t[1],workerHours:n,loading:!1})}))}},{key:"render",value:function(){var e=this,t=function(){for(var t=[],a=0;a<e.state.workerHours.length;a++)null!=e.state.workerHours[a].start_time?t.push(r.a.createElement(g.a,{sm:"11",md:"10",key:a},r.a.createElement(st.a.Item,null,e.state.daysOfWeek[a],": ",e.convertMinsToHrsMins(e.state.workerHours[a].start_time),"-",e.convertMinsToHrsMins(e.state.workerHours[a].end_time)))):t.push(r.a.createElement(g.a,{sm:"11",md:"10",key:a},r.a.createElement(st.a.Item,null,e.state.daysOfWeek[a],": Off")));return t},a=function(){return 0==e.state.choice?r.a.createElement($t,null):1==e.state.choice?r.a.createElement(ya,{worker:e.state.worker,receivedServices:e.state.receivedServices,selectedOption:e.state.selectedOption,storeHours:e.state.storeHours,workerHours:e.state.workerHours,updateWorker:e.updateWorker}):r.a.createElement("p",null,"Past Appointments go here....")};return r.a.createElement(v.a,{fluid:!0},r.a.createElement((function(n){return e.state.loading?r.a.createElement(E.a,{className:"vertical-center"},r.a.createElement(g.a,null,r.a.createElement(ct.a,{css:Ma,size:20,color:"#2196f3",loading:e.state.isLoading}))):r.a.createElement(E.a,{className:"profile"},r.a.createElement(g.a,{xs:"11",md:"3"},r.a.createElement("div",{className:"profile-sidebar"},r.a.createElement("div",{className:"profile-userpic"},r.a.createElement(V.a,{src:"https://i.redd.it/v0caqchbtn741.jpg",className:"img-responsive",alt:"",rounded:!0})),r.a.createElement("div",{className:"profile-usertitle"},r.a.createElement("div",{className:"profile-usertitle-name"},e.state.worker.first_name+" "+e.state.worker.last_name),r.a.createElement("div",{className:"profile-usertitle-job"},"Stylist")),r.a.createElement("div",{className:"profile-userbuttons"},r.a.createElement("button",{type:"button",className:"btn btn-success btn-sm"},"Give a Raise"),r.a.createElement("button",{type:"button",className:"btn btn-danger btn-sm"},"Lay Off")),r.a.createElement(st.a,{variant:"flush"},r.a.createElement(E.a,{className:"justify-content-center mt-4"},r.a.createElement("h5",null,"Working Hours"),r.a.createElement(t,null))),r.a.createElement("div",{className:"profile-usermenu"},r.a.createElement(J.a,{defaultActiveKey:"link-0",className:"flex-column",variant:"pills"},r.a.createElement(J.a.Link,{eventKey:"link-0",active:0==e.state.choice,onClick:function(){return e.updateContent(0)}},"Calendar"),r.a.createElement(J.a.Link,{eventKey:"link-1",active:1==e.state.choice,onClick:function(){return e.updateContent(1)}},"Edit Profile"),r.a.createElement(J.a.Link,{eventKey:"link-2",active:2==e.state.choice,onClick:function(){return e.updateContent(2)}},"Past Appointments"))))),r.a.createElement(g.a,{xs:"11",md:"9"},r.a.createElement("div",{className:"profile-content"},r.a.createElement(a,null))))}),null))}}]),t}(r.a.Component),wa=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).fileChangedHandler=function(e,t){t("pictureCount",e.target.files.length),a.setState({selectedFiles:e.target.files})},a.state={name:"",cost:"",duration:"",description:"",workers:[],category:[],store_id:"",categoryOptions:[{value:"nails",label:"Nails"},{value:"hair",label:"Hair"}],workerOptions:[],selectedOption:null,selectedFiles:[]},a.yupValidationSchema=F.c().shape({name:F.e().min(2,"Name must have at least 2 characters").max(100,"Name can't be longer than 100 characters").required("Name is required"),description:F.e().min(20,"Description must have at least 20 characters").required("Description is required"),cost:F.b().positive("Cost must be positive").required("Cost is required"),duration:F.b().positive("Duration must be positive").required("Duration is required"),workers:F.a().required("Worker is required").nullable(),category:F.a().required("Category is required").nullable(),pictureCount:F.b().required("Pictures are required").min(1,"Must have at least one picture")}),a.triggerServiceDisplay=a.triggerServiceDisplay.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/stores/"+this.props.match.params.store_id+"/workers",{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){if(200===e.status)return e.json();ve.dispatch(I(e))})).then((function(t){if(t){var a=t.map((function(e){return{value:e.id,label:e.first_name+" "+e.last_name}}));e.setState({workerOptions:a})}}))}},{key:"componentDidUpdate",value:function(e,t){e.service!==this.props.service&&this.props.history.push({pathname:"/stores/"+this.props.service.store_id+"/services/"+this.props.service.id})}},{key:"triggerServiceDisplay",value:function(e){this.props.history.push({pathname:"/stores/"+e.store_id+"/services/"+e.id,state:{service:e}})}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{fluid:!0},r.a.createElement(E.a,{className:"justify-content-center"},r.a.createElement(g.a,{xs:8,sm:7,md:6,lg:5},r.a.createElement(A.a,{enableReinitialize:!0,initialValues:{name:"",cost:"",duration:"",description:"",pictures:[],workers:[],category:[],store_id:this.props.match.params.store_id,pictureCount:this.state.selectedFiles.length},validationSchema:this.yupValidationSchema,onSubmit:function(){var t=Object(Be.a)(Ge.a.mark((function t(a,n){var r,s,o,l;return Ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.setSubmitting,s=e.props.match.params.store_id,o=e.state.selectedFiles,l=e.triggerServiceDisplay,a.category=a.category.map((function(e){return e.label})),a.workers=a.workers.map((function(e){return e.value})),fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/stores/addService/"+s,{method:"POST",headers:{"Content-type":"application/json"},credentials:"include",body:JSON.stringify(a)}).then((function(e){if(200===e.status)return e.json();ve.dispatch(I(e))})).then(function(){var e=Object(Be.a)(Ge.a.mark((function e(t){var a;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}if(!(this.state.selectedFiles.length>0)){e.next=5;break}return a="stores/"+this.props.match.params.store_id+"/services/"+t.id+"/",e.next=5,_t(a,o);case 5:l(t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()),r(!1);case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},(function(t){var a=t.values,n=t.errors,s=t.touched,o=t.handleChange,l=t.handleBlur,i=t.handleSubmit,c=t.setFieldValue;return r.a.createElement(k.a,{className:"formBody rounded"},r.a.createElement("h3",null,"Add Service"),r.a.createElement(k.a.Group,{controlId:"formService"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.e,null))),r.a.createElement(k.a.Control,{type:"text",value:a.name,placeholder:"Name of Service",name:"name",onChange:o,onBlur:l,className:s.name&&n.name?"error":null})),s.name&&n.name?r.a.createElement("div",{className:"error-message"},n.name):null),r.a.createElement(k.a.Group,{controlId:"formCost"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.b,null))),r.a.createElement(k.a.Control,{type:"number",value:a.cost,placeholder:"Cost",name:"cost",onChange:o,onBlur:l,className:s.cost&&n.cost?"error":null})),s.cost&&n.cost?r.a.createElement("div",{className:"error-message"},n.cost):null),r.a.createElement(k.a.Group,{controlId:"formDuration"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.f,null))),r.a.createElement(k.a.Control,{type:"number",value:a.duration,placeholder:"Duration (in min)",name:"duration",onChange:o,onBlur:l,className:s.duration&&n.duration?"error":null})),s.duration&&n.duration?r.a.createElement("div",{className:"error-message"},n.duration):null),r.a.createElement(k.a.Group,{controlId:"formDescription"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.j,null))),r.a.createElement(k.a.Control,{type:"textarea",rows:3,value:a.description,placeholder:"Description",name:"description",onChange:o,onBlur:l,className:s.description&&n.description?"error":null})),s.description&&n.description?r.a.createElement("div",{className:"error-message"},n.description):null),r.a.createElement(k.a.Group,{controlId:"formWorkers"},r.a.createElement(K.a,{value:a.workers,onChange:function(e){return c("workers",e)},name:"workers",options:e.state.workerOptions,isMulti:!0,placeholder:"Assigned Workers",className:s.workers&&n.workers?"error":null}),s.workers&&n.workers?r.a.createElement("div",{className:"error-message"},n.workers):null),r.a.createElement(k.a.Group,{controlId:"formCategory"},r.a.createElement(K.a,{value:a.category,onChange:function(e){return c("category",e)},name:"category",options:e.state.categoryOptions,isMulti:!0,placeholder:"Category",className:s.category&&n.category?"error":null}),s.category&&n.category?r.a.createElement("div",{className:"error-message"},n.category):null),r.a.createElement(k.a.Group,{controlId:"formPictureCount"},r.a.createElement("input",{onChange:function(t){return e.fileChangedHandler(t,c)},type:"file",multiple:!0,className:s.pictureCount&&n.pictureCount?"error":null}),s.pictureCount&&n.pictureCount?r.a.createElement("div",{className:"error-message"},n.pictureCount):null),r.a.createElement(M.a,{onClick:i},"Submit"))})))))}}]),t}(r.a.Component),Sa=(a(410),["#f0d1d9","#f7e5e4","#d6ced3"]),Ha=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={services:[]},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"triggerServiceEdit",value:function(e){this.props.history.push({pathname:"/stores/"+this.props.match.params.store_id+"/services/"+e.id+"/edit",state:{service:e}})}},{key:"triggerServiceDisplay",value:function(e){this.props.history.push({pathname:"/stores/"+this.props.match.params.store_id+"/services/"+e.id,state:{service:e}})}},{key:"triggerAddService",value:function(){this.props.history.push({pathname:"/stores/addService/"+this.props.match.params.store_id})}},{key:"componentDidMount",value:function(){var e=this;this.props.location.state&&this.props.location.state.services?this.setState({services:this.props.location.state.services}):fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/stores/"+this.props.match.params.store_id+"/services/",{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){if(200===e.status)return e.json()})).then((function(t){t&&e.setState({services:t})}))}},{key:"render",value:function(){var e=this,t=null;return t=this.state.services.length>0?r.a.createElement(g.a,null,r.a.createElement("p",{className:"services_title"},"My Services "),r.a.createElement(M.a,{className:"buttons",onClick:function(){return e.triggerAddService()}},"Add Service"),r.a.createElement("div",{className:"service_container"},this.state.services.map((function(t,a){return r.a.createElement(g.a,{key:"service-"+t.id},r.a.createElement("div",{className:"service_card"},r.a.createElement("div",{className:"service_text",style:{backgroundColor:"".concat(Sa[a%3])}},r.a.createElement("div",{className:"fun_style"}," "),r.a.createElement(g.a,null,r.a.createElement("div",{className:"title_container",style:{backgroundColor:"".concat(Sa[a%3])}},r.a.createElement("span",{className:"service_title",onClick:function(){return e.triggerServiceDisplay(t)}}," ",t.name," "),r.a.createElement(w.c,{className:"edit",size:15,onClick:function(){return e.triggerServiceEdit(t)}})),r.a.createElement(E.a,null,r.a.createElement("div",{className:"service_subtitle"},r.a.createElement("p",null," Category "),r.a.createElement("p",null," Cost "),r.a.createElement("p",null," Duration "),r.a.createElement("p",null," Associated Workers "),r.a.createElement("p",null," Description ")),r.a.createElement("div",{className:"subtitle_values"},r.a.createElement("p",null,"  ",t.category,"  "),r.a.createElement("p",null," $ ",t.cost,"  "),r.a.createElement("p",null,"  ",t.duration," Minutes  "),r.a.createElement("p",null," ",t.workers," "),r.a.createElement("p",null," ",t.description," ")))))))})))):r.a.createElement("div",null,r.a.createElement("p",{className:"noResults"},"No Services!"),r.a.createElement(M.a,{onClick:function(){return e.triggerAddService()}},"Add Service")),r.a.createElement(v.a,null,t)}}]),t}(r.a.Component),_a=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={service:{id:"",name:"",cost:"",workers:[],store_id:"",category:"",description:""},pictures:[]},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(Be.a)(Ge.a.mark((function e(){var t,a,n;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St("stores/"+this.props.match.params.store_id+"/services/"+this.props.match.params.service_id+"/");case 2:if(0==(t=e.sent).length&&(t=[{url:"/hair.jpg",key:"/hair.jpg"},{url:"/nails.jpg",key:"/nails.jpg"},{url:"/salon.jpg",key:"/salon.jpg"}]),!this.props.location.state||!this.props.location.state.service){e.next=8;break}this.setState({service:this.props.location.state.service,pictures:t}),e.next=15;break;case 8:return e.next=10,fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/stores/"+this.props.match.params.store_id+"/services/"+this.props.match.params.service_id,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"});case 10:return a=e.sent,e.next=13,a.json();case 13:n=e.sent,this.setState({service:n,pictures:t});case 15:return e.abrupt("return",Promise.resolve());case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(v.a,{fluid:!0},r.a.createElement(E.a,{className:"justify-content-center"},r.a.createElement(g.a,null,r.a.createElement("h1",null,this.state.service.name),r.a.createElement("p",null,this.state.service.description)),r.a.createElement(g.a,{xs:10,sm:9,md:8,lg:7},r.a.createElement(Je,{className:"carousel",pictures:this.state.pictures}))))}}]),t}(r.a.Component),Ta=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).deleteFileChangeHandler=function(){var e=Object(Be.a)(Ge.a.mark((function e(t,n,r){return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.checked){e.next=7;break}return e.next=3,a.state.keys.push(t.target.id);case 3:console.log(a.state.pictures.length,r,a.state.keys.length),n("pictureCount",a.state.pictures.length+r-a.state.keys.length),e.next=11;break;case 7:return e.next=9,a.state.keys.pop(t.target.id);case 9:console.log(a.state.pictures.length,r,a.state.keys.length),n("pictureCount",a.state.pictures.length+r-a.state.keys.length);case 11:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),a.fileChangedHandler=function(e,t,n){a.setState({selectedFiles:e.target.files}),t("pictureCount",a.state.pictures.length+e.target.files.length-a.state.keys.length),t("pictures",e.target.files)},a.state={service:{id:"",name:"",cost:"",workers:[],store_id:"",category:"",description:""},categoryOptions:[{value:"nails",label:"Nails"},{value:"hair",label:"Hair"}],convertedCategory:[],workerOptions:[],selectedOption:null,pictures:[],keys:[],selectedFiles:[]},a.yupValidationSchema=F.c().shape({name:F.e().min(2,"Name must have at least 2 characters").max(100,"Name can't be longer than 100 characters").required("Name is required"),description:F.e().min(20,"Description must have at least 20 characters").required("Description is required"),cost:F.b().positive("Cost must be positive").required("Cost is required"),duration:F.b().positive("Duration must be positive").required("Duration is required"),workers:F.a().required("Worker is required").nullable(),category:F.a().required("Category is required").nullable(),pictureCount:F.b().required("Pictures are required").min(1,"Must have at least one picture")}),a.triggerServiceDisplay=a.triggerServiceDisplay.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"triggerServiceDisplay",value:function(e){this.props.history.push({pathname:"/stores/"+this.props.match.params.store_id+"/services/"+this.props.match.params.service_id,state:{service:e}})}},{key:"componentDidMount",value:function(){var e=Object(Be.a)(Ge.a.mark((function e(){var t,a,n=this;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St("stores/"+this.props.match.params.store_id+"/services/"+this.props.match.params.service_id);case 2:t=e.sent,console.log(t),this.props.location.state&&this.props.location.state.service?(console.log(this.props.location.state.service),a=this.props.location.state.service.category.map((function(e){return{value:e.toLowerCase(),label:e}})),this.setState({service:this.props.location.state.service,pictures:t,convertedCategory:a})):fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/stores/"+this.props.match.params.store_id+"/services/"+this.props.match.params.service_id,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){if(200===e.status)return e.json();ve.dispatch(I(e))})).then((function(e){if(e){var a=e.category.map((function(e){return{value:e.toLowerCase(),label:e}}));n.setState({service:e,pictures:t,convertedCategory:a})}}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{fluid:!0},r.a.createElement(E.a,{className:"justify-content-center"},r.a.createElement(g.a,{xs:8,sm:7,md:6,lg:5},r.a.createElement(A.a,{enableReinitialize:!0,initialValues:{name:this.state.service.name,cost:this.state.service.cost,duration:this.state.service.duration,description:this.state.service.description,pictures:[],pictureCount:this.state.pictures.length-this.state.keys.length,workers:this.state.service.workers,category:this.state.convertedCategory,store_id:this.props.match.params.store_id},validationSchema:this.yupValidationSchema,onSubmit:function(){var t=Object(Be.a)(Ge.a.mark((function t(a){var n,r,s,o;return Ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.match.params.store_id,r=e.props.match.params.service_id,s=e.triggerServiceDisplay,a.category=a.category.map((function(e){return e.label})),!(e.state.keys.length>0)){t.next=7;break}return t.next=7,jt(e.state.keys);case 7:if(!(e.state.selectedFiles.length>0)){t.next=11;break}return o="stores/"+e.props.match.params.store_id+"/services/"+e.props.match.params.service_id+"/",t.next=11,_t(o,e.state.selectedFiles);case 11:fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/stores/"+n+"/services/"+r,{method:"POST",headers:{"Content-type":"application/json"},credentials:"include",body:JSON.stringify(a)}).then((function(e){if(200===e.status)return e.json();ve.dispatch(I(e))})).then((function(e){e&&s(e)}));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},(function(t){var a=t.values,n=t.errors,s=t.touched,o=t.handleChange,l=t.handleBlur,i=t.handleSubmit,c=t.setFieldValue;return r.a.createElement(k.a,{className:"formBody rounded"},r.a.createElement("h3",null,"Edit Service"),r.a.createElement(k.a.Group,{controlId:"formService"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.e,null))),r.a.createElement(k.a.Control,{type:"text",value:a.name,placeholder:"Name of Service",name:"name",onChange:o,onBlur:l,className:s.name&&n.name?"error":null})),s.name&&n.name?r.a.createElement("div",{className:"error-message"},n.name):null),r.a.createElement(k.a.Group,{controlId:"formCost"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.b,null))),r.a.createElement(k.a.Control,{type:"number",value:a.cost,placeholder:"Cost",name:"cost",onChange:o,onBlur:l,className:s.cost&&n.cost?"error":null})),s.cost&&n.cost?r.a.createElement("div",{className:"error-message"},n.cost):null),r.a.createElement(k.a.Group,{controlId:"formDuration"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.f,null))),r.a.createElement(k.a.Control,{type:"number",value:a.duration,placeholder:"Duration (in min)",name:"duration",onChange:o,onBlur:l,className:s.duration&&n.duration?"error":null})),s.duration&&n.duration?r.a.createElement("div",{className:"error-message"},n.duration):null),r.a.createElement(k.a.Group,{controlId:"formDescription"},r.a.createElement(C.a,null,r.a.createElement(C.a.Prepend,null,r.a.createElement(C.a.Text,null,r.a.createElement(w.j,null))),r.a.createElement(k.a.Control,{type:"textarea",rows:3,value:a.description,placeholder:"Description",name:"description",onChange:o,onBlur:l,className:s.description&&n.description?"error":null})),s.description&&n.description?r.a.createElement("div",{className:"error-message"},n.description):null),r.a.createElement(k.a.Group,{controlId:"formCategory"},r.a.createElement(K.a,{value:a.category,onChange:function(e){return c("category",e)},name:"category",options:e.state.categoryOptions,isMulti:!0,placeholder:"Category",className:s.category&&n.category?"error":null}),s.category&&n.category?r.a.createElement("div",{className:"error-message"},n.category):null),r.a.createElement(k.a.Group,{controlId:"pictureCount"},r.a.createElement(k.a.Label,null,"Delete Images"),e.state.pictures.map((function(t,n){return r.a.createElement("div",{key:"pic-"+n},r.a.createElement("img",{className:"img-fluid",src:t.url,alt:"Slide "+n}),r.a.createElement(k.a.Check,{id:t.key,label:t.key.split("/").slice(-1)[0],onChange:function(t){return e.deleteFileChangeHandler(t,c,a.pictures.length)}}))}))),r.a.createElement(k.a.Group,{controlId:"pictures"},r.a.createElement(k.a.Label,null,"Add Images"),r.a.createElement("br",null),r.a.createElement("input",{onChange:function(t){return e.fileChangedHandler(t,c,a.pictures)},type:"file",multiple:!0,className:s.pictures&&n.pictures?"error":null}),s.pictureCount&&n.pictureCount?r.a.createElement("div",{className:"error-message"},n.pictureCount):null),r.a.createElement(M.a,{onClick:i},"Submit"))})))))}}]),t}(r.a.Component),ja=a(202);a(261);function xa(){var e=Object(nt.a)(["\n  display: block;\n  margin: 0 auto;\n"]);return xa=function(){return e},e}var Oa=Object(ut.css)(xa()),Na=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).deleteAppointment=function(){fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/appointments/delete/"+a.props.match.params.group_id,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){if(200===e.status)return e.json();ve.dispatch(I(e))})).then((function(e){ve.dispatch(I("Deleted Appointment")),a.props.history.push({pathname:"/"})}))},a.triggerAppointmentCancel=function(){Object(ja.confirmAlert)({title:"Are you sure?",message:"You will be charged a cancellation fee by this store.",buttons:[{label:"Yes",onClick:function(){return a.deleteAppointment()}},{label:"No"}]})},a.state={appointment:[],start_time:0,user_id:0,end_time:0,store_name:"",cost:0,service_names:[],workers:[],loading:!0},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"convertMinsToHrsMins",value:function(e){var t=Math.floor(e/60),a=e%60,n=!1;return 24==t?(n=!0,t-=12):t<12?n=!0:12!=t&&(t-=12),0==(t=t<10?"0"+t:t)&&(t="12"),a=a<10?"0"+a:a,n?"".concat(t,":").concat(a,"am"):"".concat(t,":").concat(a,"pm")}},{key:"componentDidMount",value:function(){var e=this;fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/appointments/display/"+this.props.match.params.group_id,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){if(200===e.status)return e.json();ve.dispatch(I(e))})).then((function(t){t&&e.setState({appointment:t.appointment,user_id:t.user_id,start_time:t.start_time,end_time:t.end_time,store_name:t.store_name,cost:t.cost,service_names:t.service_names,workers:t.workers,loading:!1})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{fluid:!0},r.a.createElement((function(t){return e.state.loading?r.a.createElement(E.a,{className:"vertical-center"},r.a.createElement(g.a,null,r.a.createElement(ct.a,{css:Oa,size:20,color:"#2196f3",loading:e.state.isLoading}))):(vt.a.get("user")&&e.state.user_id==JSON.parse(vt.a.get("user").substring(2)).id&&(a=r.a.createElement(M.a,{variant:"danger",className:"float-left",onClick:function(){return e.triggerAppointmentCancel()}},"Cancel Appointment")),r.a.createElement(E.a,{className:"justify-content-md-center"},r.a.createElement(g.a,{lg:5},r.a.createElement(Ye.a,{className:"mt-5"},r.a.createElement(Ye.a.Header,{as:"h5"},"Your Appointment at: ",e.state.store_name),r.a.createElement(Ye.a.Body,null,r.a.createElement(Ye.a.Text,{as:"div"},r.a.createElement(st.a,{as:"div",variant:"flush"},r.a.createElement(st.a.Item,null,"Appointment Start Time: ",e.convertMinsToHrsMins(e.state.start_time)),r.a.createElement(st.a.Item,null,"Appointment End Time: ",e.convertMinsToHrsMins(e.state.end_time)),r.a.createElement(st.a.Item,null,"Services: ",e.state.service_names.toString()),r.a.createElement(st.a.Item,null,"Total Cost: ",e.state.cost),r.a.createElement(st.a.Item,null,"Scheduled Technicians: ",e.state.workers.toString()))),a)))));var a}),null))}}]),t}(r.a.Component),Ia=Object(i.h)(Na);function Da(){var e=Object(nt.a)(["\n  display: block;\n  margin: 0 auto;\n"]);return Da=function(){return e},e}var Wa=Object(ut.css)(Da()),Ra=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).deleteAppointment=function(){fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/appointments/delete/"+a.props.match.params.group_id,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){if(200===e.status)return e.json();ve.dispatch(I(e))})).then((function(e){ve.dispatch(I("Deleted Appointment")),a.props.history.push({pathname:"/"})}))},a.triggerAppointmentCancel=function(){Object(ja.confirmAlert)({title:"Are you sure?",message:"You will be charged a cancellation fee by this store.",buttons:[{label:"Yes",onClick:function(){return a.deleteAppointment()}},{label:"No"}]})},a.triggerAppointmentDisplay=function(e){a.props.history.push({pathname:"/appointments/"+e})},a.state={appointment:[],start_time:0,user_id:0,end_time:0,store_name_mappings:[],store_ids:[],cost:0,service_name_mappings:[],grouped_service_ids:[],workers:[],loading:!0},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"convertMinsToHrsMins",value:function(e){var t=Math.floor(e/60),a=e%60,n=!1;return 24==t?(n=!0,t-=12):t<12?n=!0:12!=t&&(t-=12),0==(t=t<10?"0"+t:t)&&(t="12"),a=a<10?"0"+a:a,n?"".concat(t,":").concat(a,"am"):"".concat(t,":").concat(a,"pm")}},{key:"formatDate",value:function(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),r=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[a,n,r].join("-")}},{key:"componentDidMount",value:function(){var e=this;fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/appointments/"+JSON.parse(vt.a.get("user").substring(2)).id,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(e){if(200===e.status)return e.json();ve.dispatch(I(e))})).then((function(t){t&&(0===Object.keys(t).length&&t.constructor===Object?e.setState({loading:!1,hasAppointments:!1}):e.setState({store_ids:t.store_ids,store_name_mappings:t.store_name_mappings,dates:t.dates,start_times:t.start_times,end_times:t.end_times,costs:t.costs,group_ids:t.group_ids,service_name_mappings:t.service_name_mappings,grouped_service_ids:t.grouped_service_ids,loading:!1,hasAppointments:!0}))}))}},{key:"render",value:function(){var e=this,t=function(t){for(var a=[],n=function(n){a.push(r.a.createElement(st.a.Item,{key:e.state.grouped_service_ids[t.index][n]},e.state.service_name_mappings.find((function(a){return a.id==e.state.grouped_service_ids[t.index][n]})).name))},s=0;s<e.state.grouped_service_ids[t.index].length;s++)n(s);return a},a=function(a){for(var n=[],s=function(a){n.push(r.a.createElement(Ye.a,{style:{cursor:"pointer"},key:e.state.group_ids[a],className:"my-5",onClick:function(){return e.triggerAppointmentDisplay(e.state.group_ids[a])}},r.a.createElement(Ye.a.Header,{as:"h4"},e.state.store_name_mappings.find((function(t){return t.id==e.state.store_ids[a]})).name," on ",e.formatDate(e.state.dates[a])),r.a.createElement(Ye.a.Body,null,r.a.createElement(Ye.a.Text,{as:"div"},r.a.createElement(E.a,null,r.a.createElement(g.a,null,e.convertMinsToHrsMins(e.state.start_times[a])," - ",e.convertMinsToHrsMins(e.state.end_times[a])," $",e.state.costs[a])),r.a.createElement(E.a,null,r.a.createElement(g.a,null,r.a.createElement("h5",null,"Services Booked for Today"),r.a.createElement(st.a,{as:"div",variant:"flush"},r.a.createElement(t,{index:a}))))))))},o=0;o<e.state.group_ids.length;o++)s(o);return n};return r.a.createElement(v.a,{fluid:!0},r.a.createElement((function(t){return e.state.loading?r.a.createElement(E.a,{className:"vertical-center"},r.a.createElement(g.a,null,r.a.createElement(ct.a,{css:Wa,size:20,color:"#2196f3",loading:e.state.isLoading}))):e.state.hasAppointments?(vt.a.get("user")&&e.state.user_id==JSON.parse(vt.a.get("user").substring(2)).id&&r.a.createElement(M.a,{variant:"danger",className:"float-left",onClick:function(){return e.triggerAppointmentCancel()}},"Cancel Appointment"),r.a.createElement(E.a,{className:"justify-content-md-center"},r.a.createElement(g.a,{lg:5},r.a.createElement(a,null)))):r.a.createElement(E.a,{className:"justify-content-center mt-5"},r.a.createElement(g.a,{xs:11,lg:8},r.a.createElement(Ye.a,{className:"w-70 h-60"},r.a.createElement(Ye.a.Header,{as:"h4"},"My Appointments"),r.a.createElement(Ye.a.Body,null,r.a.createElement(Ye.a.Text,{as:"div"},r.a.createElement("h5",null,"Whoops, looks like you need to book an appointment with us first. "),r.a.createElement(V.a,{className:"h-100 w-100",src:"https://s3.amazonaws.com/thumbnails.thecrimson.com/photos/2018/11/15/001152_1334195.jpg.1500x998_q95_crop-smart_upscale.jpg"}))))))}),null))}}]),t}(r.a.Component),Pa=Object(i.h)(Ra);var Ga=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(l.a,null,r.a.createElement(ae,null),r.a.createElement("div",{className:"App-body"},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:Ue}),r.a.createElement(i.b,{exact:!0,path:"/about",component:Ve}),r.a.createElement(i.b,{path:"/search",component:tt}),r.a.createElement(i.b,{exact:!0,path:"/login",component:(e=z,function(a){function n(e){var t;return Object(c.a)(this,n),(t=Object(m.a)(this,Object(p.a)(n).call(this,e))).state={loading:!0,redirect:!1},t}return Object(h.a)(n,a),Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("http://bloom-490-dev.us-east-1.elasticbeanstalk.com/checkToken",{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then((function(t){200===t.status?e.setState({loading:!1,redirect:!0}):e.setState({loading:!1,redirect:!1})}))}},{key:"render",value:function(){var a=this.state,n=a.loading,s=a.redirect;return n?null:s?r.a.createElement(i.a,{to:"/"}):r.a.createElement(e,Object.assign({addAlertPassed:t},this.props))}}]),n}(n.Component))}),r.a.createElement(i.b,{exact:!0,path:"/logout",component:function(){vt.a.remove("token"),vt.a.remove("user"),ve.dispatch({type:"USER_LOGOUT"}),window.location.href="/"}}),r.a.createElement(i.b,{exact:!0,path:"/signup",component:z}),r.a.createElement(i.b,{path:"/users/edit/:user_id",component:na(sa)}),r.a.createElement(i.b,{path:"/users/:user_id/stores",component:na(ua)}),r.a.createElement(i.b,{path:"/users/:user_id/appointments",component:na(Pa)}),r.a.createElement(i.b,{path:"/users/:user_id",component:na(la)}),r.a.createElement(i.b,{exact:!0,path:"/storeCalendar/:store_id",component:na($t)}),r.a.createElement(i.b,{path:"/book/:store_id",component:Ct}),r.a.createElement(i.b,{exact:!0,path:"/store/signup",component:na(It)}),r.a.createElement(i.b,{path:"/stores/edit/:store_id",component:na(aa)}),r.a.createElement(i.b,{path:"/stores/addService/:store_id",component:na(wa)}),r.a.createElement(i.b,{path:"/stores/:store_id/services/:service_id/edit",component:na(Ta)}),r.a.createElement(i.b,{path:"/stores/:store_id/services/:service_id",component:_a}),r.a.createElement(i.b,{path:"/stores/:store_id/services",component:na(Ha)}),r.a.createElement(i.b,{path:"/stores/addWorker/:store_id",component:na(da)}),r.a.createElement(i.b,{path:"/stores/:store_id/workers/:worker_id/edit",component:na(ya)}),r.a.createElement(i.b,{path:"/stores/:store_id/workers/:worker_id",component:Ca}),r.a.createElement(i.b,{path:"/stores/:store_id/workers",component:na(ha)}),r.a.createElement(i.b,{path:"/stores/:store_id",component:Kt}),r.a.createElement(i.b,{path:"/appointments/:group_id",component:na(Ia)})))));var e,t};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(x.a,{store:ve},r.a.createElement(Ga,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[306,1,2]]]);
//# sourceMappingURL=main.fe87d736.chunk.js.map